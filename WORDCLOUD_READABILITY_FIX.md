# 词云可读性优化修复

## 问题描述
stats2.html 中的黑话榜词云显示了很多不规则的字母组合（如 "xjk", "bvv", "aaa" 等），而不是用户可读的词汇。

## 解决方案
添加了一个智能的可读性过滤器 `filterReadableWords`，用于在渲染词云之前过滤掉不规则的字母组合。

## 过滤规则

### 1. 中文内容
- 保留所有中文词汇（中文本身具有较好的可读性）
- 过滤掉单字中文（少于2个字）

### 2. 英文内容（多维度检测）
- **长度检查**：过滤少于3个字符或超过20个字符的词
- **元音比例检查**：元音比例应在 15%-70% 之间
  - 元音过少的词（如 "xjk"）会被过滤
  - 元音过多的词（如 "aei"）会被过滤
- **重复字符检查**：过滤连续3个相同字符的词（如 "aaa", "bbbb"）
- **辅音连续检查**：过滤连续4个以上辅音的词（如 "strngth"）
- **变量名模式检查**：过滤常见编程变量名（如 tmp, buf, ptr, idx, cnt 等）
- **X开头过滤**：过滤以 x 开头后跟辅音的短词（如 "xj", "xk"）
- **可读性模式检查**：必须包含元音-辅音或辅音-元音的交替模式

## 代码变更

### 新增函数
在 `stats2.html` 中新增了 `filterReadableWords` 函数（约 70 行）：

```javascript
function filterReadableWords(words) {
    // 多种规则综合判断英文词的可读性
    // 返回过滤后的可读词汇列表
}
```

### 应用位置
已在以下 6 个位置应用可读性过滤：

1. **`_extractPersonalSentences`** - 个人语义提取
   - 过滤个人词云数据
   
2. **`_renderTop10List`** - Top10 列表渲染
   - 过滤国民级热门词汇
   
3. **`_renderCloud50`** - Cloud50 词云渲染
   - 过滤 50 个词云词汇
   
4. **`loadWordCloud` (natPhrases)** - 国民词组
   - 过滤国家级别词组数据
   
5. **`loadWordCloud` (topSentences)** - 热门句子
   - 过滤热门句子数据
   
6. **`loadWordCloud` (slang/merit/sv)** - 黑话/功德/硅谷黑话
   - 过滤三种类型的关键词

## 预期效果

### 过滤前（示例）
```
xjk (12次)
bvv (8次)
aaa (6次)
ptr (10次)
```

### 过滤后（示例）
```
function (45次)
code (38次)
error (22次)
review (18次)
```

## 调试信息
过滤操作会在浏览器控制台输出日志：
```
[WordCloud] 可读性过滤: 50 → 42 条
[WordCloud] Cloud50 可读性过滤: 50 → 38 条
[WordCloud] Personal 可读性过滤: 30 → 25 条
```

## 注意事项

1. **中文优先**：中文词汇基本不做严格过滤，保留中文特有的表达方式
2. **误过滤可能**：某些合法的缩写（如 "API", "URL"）可能会被过滤，但这类词通常有更高的出现频率，会被其他可读词替代
3. **性能影响**：过滤操作的时间复杂度为 O(n)，对大量数据的处理影响很小
4. **可扩展性**：如需调整过滤规则，只需修改 `filterReadableWords` 函数

## 后续优化建议

1. 可以添加白名单机制，保留特定的技术缩写
2. 可以基于词频动态调整过滤严格度（高频词可以放宽规则）
3. 可以添加用户反馈机制，让用户标记误过滤的词汇
