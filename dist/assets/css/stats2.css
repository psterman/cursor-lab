/* ============================================
   stats2.css - 从 stats2.html 提取的样式
   ============================================
*/

/* @import 必须在所有其他规则之前；仅用 fonts.googleapis.com 以符合 CSP，不引入 fonts.loli.net */
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500;600;700&family=Space+Grotesk:wght@600;700&display=swap');

/* Tailwind 基础实用类 */
*,::before,::after{box-sizing:border-box;border-width:0;border-style:solid}
html{line-height:1.5;-webkit-text-size-adjust:100%}
body{margin:0;line-height:inherit;font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif}
.flex{display:flex}.grid{display:grid}.hidden{display:none}.block{display:block}
#user-modal.hidden{display:none!important}
#user-modal:not(.hidden){display:flex!important;align-items:center;justify-content:center;z-index:20000}
.h-full{height:100%}.w-full{width:100%}.max-w-\[1600px\]{max-width:1600px}
.flex-1{flex:1 1 0%}.flex-col{flex-direction:column}
.items-center{align-items:center}.justify-center{justify-content:center}.justify-between{justify-content:space-between}
.gap-2{gap:.5rem}.gap-4{gap:1rem}.gap-6{gap:1.5rem}
.rounded{border-radius:.25rem}.rounded-sm{border-radius:.125rem}
.border{border-width:1px}.border-b{border-bottom-width:1px}
.bg-zinc-800{background-color:rgb(39 39 42)}.bg-zinc-900{background-color:rgb(24 24 27)}
.p-4{padding:1rem}.p-6{padding:1.5rem}.px-4{padding-left:1rem;padding-right:1rem}.py-2{padding-top:.5rem;padding-bottom:.5rem}
.text-white{color:rgb(255 255 255)}.text-zinc-400{color:rgb(161 161 170)}.text-zinc-500{color:rgb(113 113 122)}
.text-xs{font-size:.75rem}.text-sm{font-size:.875rem}.text-3xl{font-size:1.875rem}
.font-bold{font-weight:700}.font-mono{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace}
.uppercase{text-transform:uppercase}.tracking-widest{letter-spacing:.1em}
.text-center{text-align:center}
.overflow-hidden{overflow:hidden}
.fixed{position:fixed}.absolute{position:absolute}.relative{position:relative}
.inset-0{top:0;right:0;bottom:0;left:0}.z-50{z-index:50}

/* 离线可用的字体栈（国内用户无需翻墙） */
@font-face {
    font-family: 'JetBrains Mono Fallback';
    src: local('Consolas'), local('Monaco'), local('Courier New'), local('SF Mono'), local('Menlo'), monospace;
    font-display: swap;
}
:root { --font-mono-stack: 'JetBrains Mono', 'JetBrains Mono Fallback', 'Consolas', 'Monaco', 'Courier New', 'SF Mono', 'Menlo', monospace; }

/* Dashboard theme (Pencil ref: hrdkm + B6GZW) */
        :root {
            --bg-color: #080808;
            --bg-card: #0A0A0A;
            --border-ui: #2f2f2f;
            --divider: #2f2f2f;
            --card-bg: #0A0A0A;
            --card-border: #2f2f2f;
            --text-main: #FFFFFF;
            --text-dim: #6a6a6a;
            --text-muted: #6a6a6a;
            --accent-terminal: #00FF88;
            --accent-on: #0C0C0C;
            --radius-card: 0;
            --radius-tab: 0;
            --radius-pill: 0;
        }
        /* hrdkm+B6GZW: 简洁科技风格 - label/数字/线框 */
        .dashboard-section-label { font-family: var(--font-mono-stack); font-size: 9px; font-weight: 600; color: var(--text-dim); letter-spacing: 0.5px; text-transform: uppercase; }
        .dashboard-section-title { font-family: 'Space Grotesk', system-ui, sans-serif; font-size: 18px; font-weight: 600; color: var(--text-main); }
        .dashboard-metric-value { font-family: 'Space Grotesk', system-ui, sans-serif; font-size: 32px; font-weight: 700; color: var(--text-main); letter-spacing: -1px; }
        .dashboard-metric-label { font-family: var(--font-mono-stack); font-size: 9px; font-weight: 600; color: var(--text-dim); letter-spacing: 0.5px; text-transform: uppercase; }
        .dashboard-card { background: var(--bg-card); border: 1px solid var(--border-ui); padding: 20px; }

        /* 数据刷新提示：短暂“呼吸闪烁” */
        @keyframes breathe-flash {
            0% {
                transform: translateZ(0) scale(1);
                box-shadow: 0 0 0 rgba(0, 255, 136, 0);
                background-color: rgba(0, 255, 136, 0.02);
            }
            50% {
                transform: translateZ(0) scale(1.01);
                box-shadow: 0 0 18px rgba(0, 255, 136, 0.35);
                background-color: rgba(0, 255, 136, 0.06);
            }
            100% {
                transform: translateZ(0) scale(1);
                box-shadow: 0 0 0 rgba(0, 255, 136, 0);
                background-color: rgba(0, 255, 136, 0.02);
            }
        }
        .breathe-flash {
            animation: breathe-flash 0.9s ease-in-out 1;
        }

        /* 语义爆发 Tag 动画：fade-in-up */
        @keyframes fade-in-up {
            0% { opacity: 0; transform: translateY(8px); }
            100% { opacity: 1; transform: translateY(0); }
        }
        .semantic-burst-tag {
            animation-name: fade-in-up;
            animation-duration: 520ms;
            animation-timing-function: ease-out;
            animation-fill-mode: both;
            will-change: transform, opacity;
        }

        /* WordCloud loader (pulse) */
        @keyframes wc-pulse {
            0%, 100% { opacity: 0.35; transform: scale(0.98); }
            50% { opacity: 1; transform: scale(1); }
        }
        .vibe-cloud-loader {
            display: flex;
            align-items: center;
            justify-content: center;
            height: 100%;
            min-height: 220px;
            border: 1px solid rgba(255, 255, 255, 0.08);
            background: rgba(255, 255, 255, 0.02);
        }
        .vibe-cloud-loader .dot {
            width: 10px;
            height: 10px;
            border-radius: 999px;
            background: rgba(168, 85, 247, 0.85);
            animation: wc-pulse 900ms ease-in-out infinite;
            margin: 0 6px;
        }
        .vibe-cloud-loader .dot:nth-child(2) { animation-delay: 120ms; opacity: 0.7; }
        .vibe-cloud-loader .dot:nth-child(3) { animation-delay: 240ms; opacity: 0.55; }
        .vibe-cloud-loader .label {
            margin-left: 12px;
            font-size: 12px;
            color: rgba(148, 163, 184, 0.9);
            letter-spacing: 0.12em;
            text-transform: uppercase;
            font-family: 'JetBrains Mono', monospace;
        }

        /* 语义爆发卡片刷新动效（淡入/闪烁） */
        @keyframes vibe-refresh {
            0% { opacity: 0.55; filter: saturate(0.9) brightness(0.92); }
            50% { opacity: 1; filter: saturate(1.05) brightness(1.05); }
            100% { opacity: 0.85; filter: saturate(1) brightness(1); }
        }
        .vibe-refreshing {
            animation: vibe-refresh 650ms ease-in-out 1;
        }

        /* Personal sentence chips (pulse outline) */
        .sentence-chip {
            position: relative;
            padding: 6px 8px;
            border-radius: 999px;
            border: 1px solid rgba(0, 255, 65, 0.35);
            background: rgba(0, 0, 0, 0.35);
            color: rgba(229, 231, 235, 0.92);
            font-size: 11px;
            line-height: 1.1;
            max-width: 100%;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }
        .sentence-chip.pulse {
            animation: sentencePulse 1.8s ease-in-out infinite;
            border-color: rgba(0, 255, 65, 0.55);
            box-shadow: 0 0 0 1px rgba(0, 255, 65, 0.08), 0 0 18px rgba(0, 255, 65, 0.08);
        }
        @keyframes sentencePulse {
            0%, 100% {
                box-shadow: 0 0 0 1px rgba(0, 255, 65, 0.08), 0 0 12px rgba(0, 255, 65, 0.08);
                filter: saturate(1);
            }
            50% {
                box-shadow: 0 0 0 1px rgba(0, 255, 65, 0.14), 0 0 22px rgba(0, 255, 65, 0.16);
                filter: saturate(1.15);
            }
        }

        body {
            font-family: 'Inter', 'JetBrains Mono', system-ui, sans-serif;
            background: linear-gradient(180deg, rgba(26,26,28,0) 0%, var(--bg-color) 30%);
            background-color: var(--bg-color);
            color: var(--text-main);
            overflow-x: hidden;
            position: relative;
        }
        
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
            background-image: 
                repeating-linear-gradient(
                    0deg,
                    transparent,
                    transparent 2px,
                    rgba(0, 255, 65, 0.015) 2px,
                    rgba(0, 255, 65, 0.015) 4px
                );
            background-size: 100% 4px, 20px 20px;
        }
        
        body::after {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
            background: linear-gradient(180deg, transparent 0%, rgba(0, 255, 65, 0.03) 50%, transparent 100%);
            animation: scanline 12s linear infinite;
        }
        
        @keyframes scanline {
            0% { transform: translateY(-100%); }
            100% { transform: translateY(100%); }
        }

        .hacker-border {
            border: 1px solid var(--border-ui);
            border-radius: var(--radius-card);
            position: relative;
            background: var(--bg-card);
            backdrop-filter: blur(10px);
        }

        .hacker-border::before {
            content: '';
            position: absolute;
            top: -1px; left: 0; width: 60px; height: 1px;
            background: var(--accent-terminal);
            box-shadow: 0 0 8px var(--accent-terminal);
            border-radius: var(--radius-card) 0 0 0;
        }

        #map-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
            pointer-events: auto;
            background: transparent;
        }

        /* 地图光标工具（校准/拖拽提示） */
        #map-cursor-tools {
            position: fixed;
            top: 80px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 50;
            pointer-events: auto;
            font-family: 'JetBrains Mono', monospace;
            display: flex;
            flex-direction: row;
            align-items: center;
            gap: 8px;
            flex-wrap: wrap;
            justify-content: center;
        }
        #map-cursor-tools .tool-btn {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 8px 10px;
            border: 1px solid rgba(0, 255, 65, 0.45);
            background: rgba(0, 0, 0, 0.55);
            color: #00ff41;
            font-size: 11px;
            text-transform: uppercase;
            letter-spacing: 0.08em;
            backdrop-filter: blur(8px);
            margin: 0;
        }
        #map-cursor-tools .tool-btn:hover {
            background: rgba(0, 255, 65, 0.08);
        }
        #map-cursor-tools .hint {
            margin-top: 8px;
            max-width: 320px;
            padding: 10px 10px;
            border: 1px solid rgba(0, 255, 65, 0.45);
            background: rgba(0, 0, 0, 0.55);
            color: #00ff41;
            font-size: 11px;
            line-height: 1.35;
            backdrop-filter: blur(8px);
            display: none;
        }
        #map-cursor-tools .hint b { color: #ffffff; }
        
        /* 锚定模式按钮激活状态 */
        #btn-anchor-location.active {
            background: rgba(59, 130, 246, 0.15);
            border-color: #3b82f6;
        }
        
        /* 国家选择器样式 */
        #country-selector-modal .country-item {
            padding: 10px 12px;
            border-bottom: 1px solid rgba(0, 255, 65, 0.1);
            cursor: pointer;
            color: #00ff41;
            font-family: 'JetBrains Mono', monospace;
            font-size: 12px;
            transition: background 0.2s;
        }
        #country-selector-modal .country-item:hover {
            background: rgba(0, 255, 65, 0.1);
        }
        #country-selector-modal .country-item.selected {
            background: rgba(59, 130, 246, 0.2);
            border-left: 3px solid #3b82f6;
        }

        /* 确保主容器允许穿透，但交互元素可点击 */
        .max-w-\[1600px\] {
            pointer-events: none;
        }

        /* 所有可交互元素恢复 pointer-events */
        .max-w-\[1600px\] button,
        .max-w-\[1600px\] input,
        .max-w-\[1600px\] select,
        .max-w-\[1600px\] textarea,
        .max-w-\[1600px\] a,
        .max-w-\[1600px\] [onclick],
        .max-w-\[1600px\] .stat-card,
        .max-w-\[1600px\] .hacker-border,
        .max-w-\[1600px\] canvas,
        .max-w-\[1600px\] #rank-cards-container,
        .max-w-\[1600px\] #rank-cards-container > *,
        .max-w-\[1600px\] .lang-flag-btn,
        .max-w-\[1600px\] img[onerror] {
            pointer-events: auto;
        }

        /* =========================
           顶部固定 Header 样式
           ========================= */
        :root {
            /* JS 会在运行时按实际 header 高度覆写，避免抽屉遮挡标题栏 */
            --top-header-height: 60px;
        }

        .top-header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 90;
            background: var(--bg-card);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid var(--border-ui);
            padding: 12px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: none;
            pointer-events: auto;
        }

        .top-header-left {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .top-header-title {
            display: flex;
            flex-direction: column;
        }

        .top-header-title h1 {
            margin: 0;
            font-size: 24px;
            font-weight: 700;
            letter-spacing: -0.02em;
            font-family: 'Space Grotesk', system-ui, sans-serif;
            color: var(--text-main);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .top-header-title p {
            margin: 4px 0 0 0;
            font-size: 9px;
            color: var(--text-dim);
            letter-spacing: 0.12em;
            font-weight: 500;
            text-transform: uppercase;
            font-family: var(--font-mono-stack);
        }

        .top-header-right {
            display: flex;
            align-items: center;
            gap: 12px;
            flex-wrap: wrap;
        }

        .top-header-cards {
            display: flex;
            gap: 12px;
            align-items: center;
            flex-wrap: wrap;
        }

        /* 响应式调整 */
        @media (max-width: 768px) {
            .top-header {
                padding: 8px 12px;
                flex-direction: column;
                align-items: flex-start;
                gap: 8px;
            }

            .top-header-left {
                width: 100%;
            }

            .top-header-right {
                width: 100%;
                justify-content: space-between;
            }

            .top-header-title h1 {
                font-size: 18px;
            }

            .top-header-title p {
                font-size: 8px;
            }

            .top-header-card {
                padding: 6px 10px;
            }

            .top-header-card-label {
                font-size: 8px;
            }

            .top-header-card-value {
                font-size: 10px;
            }

            body.p-4 {
                padding-top: 140px !important;
            }
        }

        /* hrdkm: 控制条/卡片 - fill #0A0A0A, stroke #2f2f2f, JetBrains Mono 9px 600 */
        .top-header-card {
            background: var(--bg-card);
            border: 1px solid var(--border-ui);
            padding: 8px 12px;
            backdrop-filter: blur(10px);
        }

        .top-header-card-label {
            font-family: var(--font-mono-stack);
            font-size: 9px;
            font-weight: 600;
            color: var(--text-dim);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 4px;
        }

        .top-header-card-value {
            font-family: 'Space Grotesk', system-ui, sans-serif;
            font-size: 14px;
            font-weight: 700;
            color: var(--text-main);
            letter-spacing: -0.5px;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        /* 为 body 添加顶部 padding，避免内容被 header 遮挡 */
        body.p-4 {
            padding-top: calc(var(--top-header-height, 60px) + 40px) !important;
        }
        
        @media (min-width: 768px) {
            body.md\:p-8 {
                padding-top: calc(var(--top-header-height, 60px) + 40px) !important;
            }
        }

        /* =========================
           赛博朋克抽屉样式
           ========================= */
        .cyber-drawer {
            position: fixed;
            top: var(--top-header-height, 60px); /* 在顶部 header 下方，不遮盖 header */
            width: 400px;
            height: calc(100vh - var(--top-header-height, 60px)); /* 减去 header 高度 */
            z-index: 100; /* 高于顶部 header (z-index: 50) */
            pointer-events: none;
            transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .left-drawer {
            overflow: hidden;
            left: 0;
            transform: translateX(-100%);
        }

        .right-drawer {
            right: 0;
            transform: translateX(100%);
        }

        @media (max-width: 768px) {
            .cyber-drawer {
                top: var(--top-header-height, 60px); /* 移动端动态高度 */
                height: calc(100vh - var(--top-header-height, 60px));
            }
        }

        .left-drawer.active {
            transform: translateX(0);
            pointer-events: auto;
        }

        .right-drawer.active {
            transform: translateX(0);
            pointer-events: auto;
        }

        .drawer-content {
            width: 100%;
            height: 100%;
            background: var(--bg-color);
            backdrop-filter: blur(20px);
            border-right: 1px solid var(--border-ui);
            border-left: 1px solid var(--border-ui);
            box-shadow: none;
            display: flex;
            flex-direction: column;
            position: relative;
            overflow: hidden;
        }

        .right-drawer .drawer-content {
            border-right: none;
            border-left: 1px solid var(--border-ui);
        }

        .left-drawer .drawer-content {
            border-left: none;
            border-right: 1px solid var(--border-ui);
        }

        /* 左右抽屉不显示光扫/扫描线效果（已按需求关闭） */
        .drawer-content::before {
            display: none;
        }

        /* 抽屉头部（Dashboard 风格） */
        .drawer-header {
            padding: 16px 20px;
            border-bottom: 1px solid var(--border-ui);
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: var(--bg-color);
            position: relative;
            z-index: 2;
        }

        .drawer-title {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .drawer-icon {
            font-size: 20px;
            filter: drop-shadow(0 0 4px var(--accent-terminal));
        }

        .drawer-title-text {
            font-size: 16px;
            font-weight: 600;
            font-family: 'Inter', var(--font-mono-stack);
            color: var(--accent-terminal);
            letter-spacing: 0.5px;
        }

        .drawer-header-actions {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .drawer-refresh-btn {
            width: 36px;
            height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 1px solid var(--border-ui);
            border-radius: 50%;
            color: var(--accent-terminal);
            cursor: pointer;
            transition: all 0.2s;
            background: transparent;
            padding: 0;
        }
        .drawer-refresh-btn:hover {
            background: rgba(0, 255, 65, 0.12);
            border-color: var(--accent-terminal);
        }
        .drawer-refresh-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        .drawer-refresh-icon {
            width: 18px;
            height: 18px;
        }
        .drawer-refresh-btn.loading .drawer-refresh-icon {
            animation: drawer-refresh-spin 0.8s linear infinite;
        }
        @keyframes drawer-refresh-spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        .drawer-close-btn {
            width: 36px;
            height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 1px solid var(--border-ui);
            border-radius: 50%;
            color: var(--accent-terminal);
            cursor: pointer;
            transition: all 0.2s;
            font-size: 16px;
            font-weight: 600;
            background: transparent;
        }

        .drawer-close-btn:hover {
            background: rgba(0, 255, 65, 0.12);
            border-color: var(--accent-terminal);
        }

        /* 抽屉内容区域 */
        .drawer-body {
            flex: 1;
            overflow-y: auto;
            padding: 0;
            position: relative;
            z-index: 1;
        }

        /* =========================
           Tab 导航栏样式（Dashboard hrdkm 控制条风格）
           ========================= */
        .drawer-tabs {
            display: flex;
            flex-direction: row;
            gap: 8px;
            padding: 12px 20px;
            margin: 0;
            border-bottom: 1px solid var(--border-ui);
            background: var(--bg-card);
        }

        .drawer-tab {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 8px 12px;
            background: var(--bg-card);
            border: 1px solid var(--border-ui);
            color: var(--text-dim);
            font-family: var(--font-mono-stack);
            font-size: 9px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
            gap: 4px;
        }

        .drawer-tab:hover {
            color: var(--text-main);
            background: rgba(0, 255, 136, 0.06);
        }

        .drawer-tab.active {
            color: var(--accent-terminal);
            background: rgba(0, 255, 136, 0.1);
            border-color: var(--accent-terminal);
        }

        .drawer-tab .tab-icon {
            font-size: 14px;
            line-height: 1;
        }

        .drawer-tab .tab-text {
            font-size: 9px;
            letter-spacing: 0.5px;
        }

        /* =========================
           排行榜卡片样式（Industrial 绿）
           ========================= */
        .ranking-card {
            border: 1px solid var(--border-ui);
            background: var(--bg-card);
            border-radius: var(--radius-card);
            overflow: hidden;
        }

        .ranking-header {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 12px 16px;
            background: rgba(0, 255, 136, 0.06);
            border-bottom: 1px solid var(--divider);
        }

        .ranking-icon {
            font-size: 18px;
        }

        .ranking-title {
            font-size: 14px;
            font-weight: 600;
            color: var(--accent-terminal);
            font-family: var(--font-mono-stack);
        }

        .ranking-subtitle {
            font-size: 10px;
            color: var(--text-dim);
            margin-left: auto;
            letter-spacing: 0.04em;
        }

        .ranking-list {
            padding: 8px;
            min-height: 120px;
        }

        .ranking-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 8px 12px;
            border-bottom: 1px solid var(--divider);
            transition: background 0.2s;
        }

        .ranking-item:hover {
            background: rgba(0, 255, 136, 0.06);
        }

        .ranking-item:last-child {
            border-bottom: none;
        }

        .ranking-rank {
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: bold;
            color: rgba(255, 255, 255, 0.5);
            font-family: 'JetBrains Mono', monospace;
        }

        .ranking-rank.top-1 { color: #ffd700; text-shadow: 0 0 10px rgba(255, 215, 0, 0.5); }
        .ranking-rank.top-2 { color: #c0c0c0; text-shadow: 0 0 10px rgba(192, 192, 192, 0.5); }
        .ranking-rank.top-3 { color: #cd7f32; text-shadow: 0 0 10px rgba(205, 127, 50, 0.5); }

        .ranking-avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            border: 2px solid rgba(0, 255, 65, 0.3);
            object-fit: cover;
        }

        .ranking-info {
            flex: 1;
            min-width: 0;
        }

        .ranking-name {
            font-size: 12px;
            color: var(--text-main);
            font-family: var(--font-mono-stack);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .ranking-score {
            font-size: 12px;
            color: var(--accent-terminal);
            font-family: var(--font-mono-stack);
            font-weight: 600;
        }

        .ranking-empty {
            text-align: center;
            padding: 40px 20px;
            color: rgba(255, 255, 255, 0.3);
            font-size: 12px;
        }

        /* 面板显示控制 */
        .right-drawer-panel {
            display: flex;
        }

        .right-drawer-panel.hidden {
            display: none !important;
        }

        /* =========================
           Drawer micro-skeleton (country switch)
           ========================= */
        .cyber-drawer.drawer-loading .drawer-body::after {
            content: '';
            position: absolute;
            inset: 0;
            pointer-events: none;
            background:
                linear-gradient(90deg,
                    rgba(0,0,0,0) 0%,
                    rgba(0,255,65,0.06) 35%,
                    rgba(0,255,65,0.12) 50%,
                    rgba(0,255,65,0.06) 65%,
                    rgba(0,0,0,0) 100%);
            transform: translateX(-60%);
            animation: drawer-shimmer 0.9s ease-in-out infinite;
            z-index: 3;
        }

        @keyframes drawer-shimmer {
            0% { transform: translateX(-60%); opacity: 0.2; }
            40% { opacity: 0.55; }
            100% { transform: translateX(60%); opacity: 0.2; }
        }

        .drawer-body::-webkit-scrollbar {
            width: 6px;
        }

        .drawer-body::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.3);
        }

        .drawer-body::-webkit-scrollbar-thumb {
            background: var(--border-ui);
            border-radius: 3px;
        }

        .drawer-body::-webkit-scrollbar-thumb:hover {
            background: var(--accent-terminal);
        }

        /* 抽屉内容项样式 */
        /* 右侧抽屉面板容器样式 */
        .right-drawer-panel {
            display: flex;
            flex-direction: column;
            height: 100%;
            overflow-y: auto;
            padding: 0;
        }

        /* 国家视图：保证模板内容可滚动、文字不被裁切 */
        #panel-country-view #countryTemplateMount {
            overflow-y: auto;
            overflow-x: hidden;
            line-height: 1.4;
            padding: 16px;
        }
        .right-drawer-panel #panel-global-content,
        .right-drawer-panel #panel-ranking-content {
            display: flex;
            flex-direction: column;
            gap: 16px;
            padding: 0 16px 16px;
            flex: 1;
            min-height: 0;
        }

        /* 工业绿主题天梯榜样式 */
        .green-table {
            border: 1px solid var(--border-ui);
            background: var(--bg-card);
            font-family: var(--font-mono-stack);
            width: 100%;
            border-collapse: collapse;
            overflow: hidden;
        }
        .green-table thead {
            background: rgba(0, 255, 136, 0.06);
        }
        .green-table thead th {
            color: var(--accent-terminal);
            padding: 12px 16px;
            text-align: left;
            font-size: 9px;
            font-weight: 600;
            font-family: var(--font-mono-stack);
            letter-spacing: 0.5px;
            border-bottom: 1px solid var(--divider);
        }
        .green-table tbody tr {
            border-bottom: 1px solid var(--divider);
        }
        .green-table tbody tr:hover {
            background: rgba(0, 255, 136, 0.05);
        }
        .green-table tbody td {
            color: var(--text-main);
            padding: 8px 12px;
            font-size: 11px;
        }
        .green-table tbody td:first-child {
            color: var(--accent-terminal);
            font-weight: 600;
            text-align: right;
            width: 40px;
        }
        .green-table .ladder-avatar {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            border: 1px solid var(--border-ui);
            cursor: pointer;
            object-fit: cover;
        }
        .green-table .ladder-avatar:hover {
            border-color: var(--accent-terminal);
        }
        #global-ladders-container {
            margin-top: 32px;
        }
        .ladder-card {
            border: 1px solid #004400;
            background: #000;
            padding: 12px;
            margin-bottom: 24px;
        }
        .ladder-card-title {
            color: #00ff41;
            font-size: 12px;
            font-weight: bold;
            margin-bottom: 8px;
            font-family: 'JetBrains Mono', monospace;
        }

        /* 矩阵绿主题天梯榜样式（Industrial） */
        .matrix-table {
            border: 1px solid var(--border-ui);
            font-family: var(--font-mono-stack);
            font-size: 12px;
            width: 100%;
            border-collapse: collapse;
            background: var(--bg-card);
            overflow: hidden;
        }
        .matrix-table thead {
            background: rgba(0, 255, 136, 0.06);
        }
        .matrix-table thead th {
            color: var(--accent-terminal);
            padding: 12px 16px;
            text-align: left;
            font-size: 9px;
            font-weight: 600;
            font-family: var(--font-mono-stack);
            letter-spacing: 0.5px;
            border-bottom: 1px solid var(--divider);
        }
        .matrix-table tbody tr {
            border-bottom: 1px solid var(--divider);
        }
        .matrix-table tbody tr:hover {
            background: rgba(0, 255, 136, 0.05);
        }
        .matrix-table tbody td {
            color: var(--text-main);
            padding: 8px 12px;
            font-size: 11px;
        }
        .matrix-table tbody td:first-child {
            color: var(--accent-terminal);
            font-weight: 600;
            text-align: right;
            width: 35px;
        }
        .matrix-table .matrix-avatar {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            border: 1px solid var(--border-ui);
            cursor: pointer;
            object-fit: cover;
        }
        .matrix-table .matrix-avatar:hover {
            border-color: var(--accent-terminal);
        }
        #global-ranking-area {
            margin-top: 24px;
        }

        /* 排行榜六卡片工业风覆盖（JS 渲染的卡片） */
        .industrial-ranking-grid > div {
            background: rgba(17, 24, 39, 0.5) !important;
            border: 1px solid rgba(0, 255, 65, 0.3) !important;
            overflow: hidden;
            width: 100% !important;
            margin-bottom: 0 !important;
            border-radius: 6px;
        }
        .industrial-ranking-grid > div > div:first-child {
            background: rgba(0, 59, 0, 0.5) !important;
            border-bottom: 1px solid rgba(0, 255, 65, 0.3) !important;
        }
        .industrial-ranking-grid table thead th {
            color: var(--accent-terminal);
            font-family: var(--font-mono-stack);
            font-size: 9px;
            font-weight: 600;
            letter-spacing: 0.5px;
        }
        .industrial-ranking-grid table tbody td {
            color: var(--text-main);
            font-size: 11px;
        }
        .industrial-ranking-grid .text-\[\#00ff41\] { color: var(--accent-terminal) !important; }
        .industrial-ranking-grid .text-\[\#00ff41\]\/90 { color: var(--text-dim) !important; }
        
        /* 排行榜列表容器 */
        .ranking-list {
            display: flex;
            flex-direction: column;
            gap: 0;
            padding: 0;
            width: 100%;
        }
        
        /* 金融App榜单风格 - Grid布局：国旗、头像、用户信息、分值 */
        .ranking-item-row {
            display: grid;
            grid-template-columns: 50px 50px 1fr 100px;
            align-items: center;
            gap: 12px;
            padding: 12px 16px;
            background-color: rgba(0, 255, 65, 0.05);
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            transition: all 0.2s;
            width: 100%;
            position: relative;
            min-height: 70px;
            cursor: pointer;
        }
        .ranking-item-row:hover {
            background-color: rgba(0, 255, 65, 0.1);
        }
        
        /* 第一列：国旗（固定宽度 50px，居中显示，加大字号） */
        .ranking-flag-column {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 50px;
            flex-shrink: 0;
        }
        .ranking-flag-large {
            font-size: 24px; /* text-xl 大小 */
            line-height: 1;
        }
        
        /* 第二列：头像（固定宽度 50px，w-10 h-10 圆形） */
        .ranking-avatar-wrapper {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 50px;
            flex-shrink: 0;
        }
        .ranking-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: 1px solid rgba(0, 255, 65, 0.3);
            box-shadow: 0 0 4px rgba(0, 255, 65, 0.2);
            object-fit: cover;
            transition: all 0.2s;
        }
        .ranking-avatar:hover {
            border-color: rgba(0, 255, 65, 0.8);
            box-shadow: 0 0 8px rgba(0, 255, 65, 0.4);
        }
        
        /* 第三列：用户信息区（flex flex-col 垂直排布） */
        .ranking-user-info {
            display: flex;
            flex-direction: column;
            gap: 4px;
            min-width: 0;
            overflow: visible;
        }
        /* 上行：user_name（绿色加粗，禁止 truncate 截断，允许自然伸展） */
        .ranking-username-row {
            display: flex;
            align-items: center;
            gap: 6px;
            min-width: 0;
        }
        .ranking-username {
            color: rgba(74, 222, 128, 1); /* text-green-400 */
            font-size: 14px;
            font-family: 'JetBrains Mono', monospace;
            font-weight: 700;
            white-space: normal;
            word-break: break-word;
            overflow: visible;
            text-overflow: clip;
            line-height: 1.4;
        }
        /* 下行：显示 user_identity 来源 */
        .ranking-identity-row {
            display: flex;
            align-items: center;
            gap: 4px;
            min-width: 0;
        }
        .ranking-identity-text {
            color: rgba(107, 114, 128, 0.7);
            font-size: 11px;
            font-family: 'JetBrains Mono', monospace;
            line-height: 1.3;
        }
        
        /* 第四列：核心分值区（右对齐，flex flex-col items-end） */
        .ranking-value-section {
            display: flex;
            flex-direction: column;
            align-items: flex-end;
            justify-content: center;
            gap: 4px;
            width: 100px;
            flex-shrink: 0;
        }
        /* 上行：核心数值（等宽大字体 font-mono） */
        .ranking-value {
            text-align: right;
            color: rgba(0, 255, 65, 1);
            font-size: 16px;
            font-family: 'JetBrains Mono', monospace;
            font-weight: 700;
            letter-spacing: 0.5px;
            line-height: 1.2;
        }
        /* 下行：固定显示该维度的单位或标签 */
        .ranking-value-label {
            text-align: right;
            color: rgba(255, 255, 255, 0.5);
            font-size: 10px;
            font-family: 'JetBrains Mono', monospace;
            line-height: 1.2;
        }
        
        /* 数据详情弹窗 */
        .ranking-detail-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.7);
            z-index: 10000;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        .ranking-detail-modal.active {
            display: flex;
        }
        .ranking-detail-card {
            background-color: rgba(10, 10, 10, 0.98);
            border: 1px solid rgba(0, 255, 65, 0.3);
            border-radius: 8px;
            padding: 24px;
            max-width: 500px;
            width: 100%;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.5);
        }
        .ranking-detail-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 12px;
            border-bottom: 1px solid rgba(0, 255, 65, 0.2);
        }
        .ranking-detail-title {
            color: rgba(0, 255, 65, 1);
            font-size: 18px;
            font-family: 'JetBrains Mono', monospace;
            font-weight: 700;
        }
        .ranking-detail-close {
            background: none;
            border: none;
            color: rgba(255, 255, 255, 0.6);
            font-size: 24px;
            cursor: pointer;
            padding: 0;
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: color 0.2s;
        }
        .ranking-detail-close:hover {
            color: rgba(255, 255, 255, 1);
        }
        .ranking-detail-content {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }
        .ranking-detail-item {
            display: flex;
            flex-direction: column;
            gap: 4px;
        }
        .ranking-detail-label {
            color: rgba(255, 255, 255, 0.5);
            font-size: 11px;
            font-family: 'JetBrains Mono', monospace;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        .ranking-detail-value {
            color: rgba(255, 255, 255, 1);
            font-size: 14px;
            font-family: 'JetBrains Mono', monospace;
        }
        .ranking-detail-link {
            color: rgba(0, 255, 65, 1);
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 6px;
            transition: color 0.2s;
        }
        .ranking-detail-link:hover {
            color: rgba(74, 222, 128, 1);
            text-decoration: underline;
        }
        
        /* 移动端响应式 */
        @media (max-width: 768px) {
            .ranking-item-row {
                grid-template-columns: 40px 40px 1fr 80px;
                gap: 8px;
                padding: 10px 12px;
                min-height: 60px;
            }
            .ranking-flag-column {
                width: 40px;
            }
            .ranking-flag-large {
                font-size: 20px;
            }
            .ranking-avatar-wrapper {
                width: 40px;
            }
            .ranking-avatar {
                width: 32px;
                height: 32px;
            }
            .ranking-username {
                font-size: 12px;
            }
            .ranking-identity-text {
                font-size: 10px;
            }
            .ranking-value-section {
                width: 80px;
            }
            .ranking-value {
                font-size: 14px;
            }
            .ranking-value-label {
                font-size: 9px;
            }
            .ranking-detail-card {
                padding: 16px;
                max-width: 90%;
            }
        }

        .ranking-refresh-btn {
            padding: 8px 12px;
            font-size: 9px;
            font-weight: 600;
            font-family: var(--font-mono-stack);
            border: 1px solid var(--border-ui);
            color: var(--text-main);
            background: var(--bg-card);
            cursor: pointer;
            transition: background 0.2s, border-color 0.2s;
        }
        .ranking-refresh-btn:hover {
            background: rgba(0, 255, 136, 0.1);
            border-color: var(--accent-terminal);
            color: var(--accent-terminal);
        }
        .matrix-ladder-card {
            margin-bottom: 16px;
        }
        .matrix-ladder-title {
            color: #00ff41;
            font-size: 11px;
            font-weight: bold;
            margin-bottom: 6px;
            font-family: 'JetBrains Mono', monospace;
        }

        /* 矩阵绿表格样式（强制静态） */
        .matrix-table {
            width: 100%;
            background: #000;
            border: 1px solid #003b00;
            color: #00ff41;
            font-family: 'JetBrains Mono', monospace;
            font-size: 12px;
            border-collapse: collapse;
        }
        .matrix-table thead {
            background: rgba(0, 59, 0, 0.5);
        }
        .matrix-table thead th {
            color: #00ff41;
            padding: 6px 10px;
            text-align: left;
            font-size: 11px;
            font-weight: bold;
            border-bottom: 1px solid #003b00;
        }
        .matrix-table tbody tr {
            border-bottom: 1px solid rgba(0, 59, 0, 0.3);
        }
        .matrix-table tbody tr:hover {
            background: rgba(0, 59, 0, 0.2);
        }
        .matrix-table tbody td {
            color: #00ff41;
            padding: 5px 10px;
            font-size: 11px;
        }
        .matrix-table tbody td:first-child {
            color: #00ff41;
            font-weight: bold;
            text-align: right;
            width: 35px;
        }

        .drawer-item {
            padding: 15px;
            margin-bottom: 0;
            background: rgba(0, 255, 65, 0.05);
            border: 1px solid rgba(0, 255, 65, 0.2);
            border-radius: 4px;
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
            flex-shrink: 0;
        }

        .drawer-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(
                90deg,
                transparent,
                rgba(0, 255, 65, 0.1),
                transparent
            );
            transition: left 0.5s;
        }

        .drawer-item:hover {
            border-color: rgba(0, 255, 65, 0.5);
            background: rgba(0, 255, 65, 0.1);
            box-shadow: 0 0 20px rgba(0, 255, 65, 0.2);
        }

        .drawer-item:hover::before {
            left: 100%;
        }

        /* hrdkm+B6GZW: label=JetBrains Mono 9px 600 #6a6a6a, value=Space Grotesk #FFFFFF */
        .drawer-item-label {
            font-family: var(--font-mono-stack);
            font-size: 9px;
            font-weight: 600;
            color: var(--text-dim);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 8px;
        }

        .drawer-item-value {
            font-family: 'Space Grotesk', system-ui, sans-serif;
            font-size: 18px;
            font-weight: 700;
            color: var(--text-main);
            letter-spacing: -0.5px;
        }

        .drawer-item-desc {
            font-family: var(--font-mono-stack);
            font-size: 10px;
            color: var(--text-dim);
            margin-top: 8px;
        }

        /* 响应式调整 */
        @media (max-width: 768px) {
            .cyber-drawer {
                width: 100%;
            }
        }

        .stat-card {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .stat-card:hover {
            border-color: var(--accent-terminal);
            transform: translateY(-2px);
            box-shadow: 0 0 20px rgba(0, 255, 65, 0.1);
        }

        /* =========================
           Language Switch (Flags)
           ========================= */
        .lang-flag-btn {
            padding: 0;
            background: transparent;
            border: none;
            border-radius: 50%;
            cursor: pointer;
            font-family: 'JetBrains Mono', monospace;
            transition: opacity 0.3s ease, transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1), box-shadow 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 44px;
            height: 44px;
            opacity: 0.6;
            transform: scale(1);
            box-shadow: none;
            overflow: hidden;
            position: relative;
            z-index: 95; /* 顶部国旗按钮点击优先级 */
        }

        .lang-flag-btn img {
            width: 100%;
            height: 100%;
            object-fit: contain;
            border-radius: 50%;
            transition: all 0.4s ease;
            padding: 2px;
            outline: none;
            border: none;
            box-shadow: none;
            -webkit-appearance: none;
            appearance: none;
        }

        .lang-flag-btn.active {
            opacity: 1;
            border: 3px solid var(--accent-terminal);
            box-shadow: 0 0 16px rgba(0, 255, 65, 0.6), 0 0 32px rgba(0, 255, 65, 0.3), inset 0 0 20px rgba(0, 255, 65, 0.1);
            transform: scale(1.1);
        }

        .lang-flag-btn:hover:not(.active) {
            opacity: 0.9;
            transform: scale(1.15);
            transition: opacity 0.25s ease, transform 0.25s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .lang-flag-btn:hover.active {
            /* 选中状态：保持 3px 粗边框，只改变缩放和阴影 */
            border: 3px solid var(--accent-terminal);
            transform: scale(1.15);
            box-shadow: 0 0 20px rgba(0, 255, 65, 0.8), 0 0 40px rgba(0, 255, 65, 0.4), inset 0 0 25px rgba(0, 255, 65, 0.15);
            transition: opacity 0.25s ease, transform 0.25s cubic-bezier(0.34, 1.56, 0.64, 1), box-shadow 0.25s ease;
        }

        /* 防止被 ECharts 图层遮挡：强制提升层级 + 可点击 */
        #btn-zh, #btn-en {
            cursor: pointer !important;
            z-index: 9999 !important;
            position: relative !important;
        }

        .loading-overlay {
            position: absolute;
            inset: 0;
            background: var(--bg-color);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 50;
        }

        @keyframes pulse-soft {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .pulse { animation: pulse-soft 2s infinite; }

        /* 在线人数数字更新时的缩放动画 */
        @keyframes scale-bounce {
            0% { transform: scale(1); }
            50% { transform: scale(1.2); }
            100% { transform: scale(1); }
        }

        .online-count-update {
            animation: scale-bounce 0.4s ease-out;
        }

        /* =========================
           Cyberpunk Loading Effects
           ========================= */
        @keyframes skeleton-shimmer {
            0% { background-position: -200% 0; }
            100% { background-position: 200% 0; }
        }

        /* 流光骨架屏：用于数字占位（主题色绿+蓝） */
        .skeleton {
            position: relative;
            color: transparent !important;
            user-select: none;
            border-radius: 2px;
            background: linear-gradient(
                90deg,
                rgba(39, 39, 42, 0.25) 0%,
                rgba(0, 255, 65, 0.18) 40%,
                rgba(0, 255, 65, 0.10) 55%,
                rgba(39, 39, 42, 0.25) 100%
            );
            background-size: 240% 100%;
            animation: skeleton-shimmer 1.2s ease-in-out infinite;
            box-shadow: 0 0 18px rgba(0, 255, 65, 0.06);
        }

        /* 骨架屏期间保持布局高度稳定 */
        #totalUsers.skeleton,
        #totalAnalysis.skeleton,
        #totalChars.skeleton {
            min-height: 2.5rem;
        }
        #avgPerUser.skeleton,
        #avgPerScan.skeleton,
        #systemDays.skeleton,
        #cityCount.skeleton {
            min-height: 1.6rem;
        }

        @keyframes scan-sweep {
            0% { transform: translateY(-120%); opacity: 0; }
            10% { opacity: 0.9; }
            90% { opacity: 0.9; }
            100% { transform: translateY(120%); opacity: 0; }
        }

        /* 全屏扫描线：加载期间叠加 */
        .scan-line {
            position: fixed;
            inset: 0;
            pointer-events: none;
            z-index: 40;
            opacity: 0;
            mix-blend-mode: screen;
        }
        .scan-line::before {
            content: '';
            position: absolute;
            left: 0;
            right: 0;
            height: 18vh;
            top: -20vh;
            background: linear-gradient(
                180deg,
                transparent 0%,
                rgba(0, 255, 65, 0.14) 45%,
                rgba(0, 255, 65, 0.08) 60%,
                transparent 100%
            );
            filter: blur(1px);
            box-shadow: 0 0 30px rgba(0, 255, 65, 0.12);
            animation: scan-sweep 1.6s linear infinite;
        }
        .scan-line.active {
            opacity: 1;
        }
        
        /* ============================================
           抽屉加载优化：骨架屏与渐进式加载
           ============================================ */
        
        /* 抽屉内容淡入动画 */
        .drawer-content-fade-in {
            animation: drawer-fade-in 0.4s ease-out forwards;
        }
        
        @keyframes drawer-fade-in {
            from {
                opacity: 0;
                transform: translateY(8px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        /* 抽屉卡片依次入场动画 */
        .clinic-card {
            opacity: 0;
            transform: translateY(12px);
            animation: card-slide-in 0.35s ease-out forwards;
        }
        
        .clinic-card:nth-child(1) { animation-delay: 0.05s; }
        .clinic-card:nth-child(2) { animation-delay: 0.1s; }
        .clinic-card:nth-child(3) { animation-delay: 0.15s; }
        .clinic-card:nth-child(4) { animation-delay: 0.2s; }
        .clinic-card:nth-child(5) { animation-delay: 0.25s; }
        .clinic-card:nth-child(6) { animation-delay: 0.3s; }
        .clinic-card:nth-child(7) { animation-delay: 0.35s; }
        .clinic-card:nth-child(8) { animation-delay: 0.4s; }
        
        @keyframes card-slide-in {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        /* 抽屉骨架屏卡片 */
        .drawer-skeleton-card {
            background: rgba(0, 0, 0, 0.4);
            border: 1px solid rgba(0, 255, 65, 0.15);
            border-radius: 4px;
            padding: 16px;
            margin-bottom: 12px;
            position: relative;
            overflow: hidden;
        }
        
        .drawer-skeleton-card::after {
            content: '';
            position: absolute;
            inset: 0;
            background: linear-gradient(
                90deg,
                transparent 0%,
                rgba(0, 255, 65, 0.08) 50%,
                transparent 100%
            );
            transform: translateX(-100%);
            animation: skeleton-sweep 1.5s ease-in-out infinite;
        }
        
        @keyframes skeleton-sweep {
            to {
                transform: translateX(100%);
            }
        }
        
        .drawer-skeleton-header {
            height: 18px;
            width: 40%;
            background: rgba(255, 255, 255, 0.08);
            border-radius: 2px;
            margin-bottom: 12px;
        }
        
        .drawer-skeleton-line {
            height: 12px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 2px;
            margin-bottom: 8px;
        }
        
        .drawer-skeleton-line.short { width: 60%; }
        .drawer-skeleton-line.medium { width: 80%; }
        .drawer-skeleton-line.long { width: 100%; }
        
        /* 加载进度指示器 */
        .drawer-loading-bar {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: rgba(0, 255, 65, 0.2);
            overflow: hidden;
            z-index: 10;
        }
        
        .drawer-loading-bar::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            height: 100%;
            width: 30%;
            background: linear-gradient(90deg, transparent, #00ff41, transparent);
            animation: loading-progress 1.5s ease-in-out infinite;
        }
        
        @keyframes loading-progress {
            0% { left: -30%; }
            100% { left: 100%; }
        }
        
        /* 脉冲加载点 */
        .loading-dots {
            display: inline-flex;
            gap: 4px;
            align-items: center;
        }
        
        .loading-dots span {
            width: 6px;
            height: 6px;
            background: var(--accent-terminal);
            border-radius: 50%;
            animation: loading-dot 1.4s ease-in-out infinite both;
        }
        
        .loading-dots span:nth-child(1) { animation-delay: -0.32s; }
        .loading-dots span:nth-child(2) { animation-delay: -0.16s; }
        
        @keyframes loading-dot {
            0%, 80%, 100% { transform: scale(0.6); opacity: 0.5; }
            40% { transform: scale(1); opacity: 1; }
        }
        
        /* 数据更新闪烁效果 */
        .data-updated {
            animation: data-flash 0.6s ease-out;
        }
        
        @keyframes data-flash {
            0% { background-color: rgba(0, 255, 65, 0.2); }
            100% { background-color: transparent; }
        }
        
        /* 确保内容在背景动画之上 */
        body > div {
            position: relative;
            z-index: 10;
        }
        
        /* 状态按钮激活样式 */
        .status-btn.active {
            border-width: 2px;
            box-shadow: 0 0 10px currentColor;
        }
        
        /* 用户列表项样式 */
        .user-item {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px;
            border: 1px solid transparent;
            border-radius: 4px;
            transition: all 0.2s ease;
            cursor: pointer;
        }
        
        .user-item:hover {
            background: rgba(39, 39, 42, 0.5);
            border-color: var(--card-border);
        }
        
        /* 头像呼吸灯边框 */
        .avatar-pulse {
            position: relative;
            border-radius: 50%;
            padding: 2px;
        }
        
        .avatar-pulse::before {
            content: '';
            position: absolute;
            inset: -2px;
            border-radius: 50%;
            border: 2px solid currentColor;
            opacity: 0.6;
            animation: pulse-border 2s ease-in-out infinite;
        }
        
        @keyframes pulse-border {
            0%, 100% { opacity: 0.6; transform: scale(1); }
            50% { opacity: 1; transform: scale(1.05); }
        }
        
        /* 私信浮窗样式 */
        .message-popup {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: var(--card-bg);
            border: 2px solid var(--accent-terminal);
            border-radius: 8px;
            padding: 20px;
            min-width: 300px;
            max-width: 500px;
            z-index: 1000;
            box-shadow: 0 0 30px rgba(0, 255, 65, 0.3);
            animation: popup-appear 0.3s ease-out;
        }
        
        @keyframes popup-appear {
            from {
                opacity: 0;
                transform: translate(-50%, -50%) scale(0.9);
            }
            to {
                opacity: 1;
                transform: translate(-50%, -50%) scale(1);
            }
        }
        
        .message-popup.destroying {
            animation: popup-destroy 0.5s ease-out forwards;
        }
        
        @keyframes popup-destroy {
            to {
                opacity: 0;
                transform: translate(-50%, -50%) scale(0.8);
            }
        }
        
        /* 私信输入框样式 - 置于最高层，避免被活跃节点/抽屉遮挡 */
        .message-input-overlay {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.7);
            z-index: 20001;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* UserText Debug Modal（用于检查 userText/提词/上报列表） */
        .usertext-debug-overlay {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.75);
            z-index: 1200;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 16px;
        }
        
        .message-input-box {
            background: var(--card-bg);
            border: 2px solid var(--accent-terminal);
            border-radius: 8px;
            padding: 20px;
            min-width: 400px;
            z-index: 20002;
        }

        /* 私信收件箱抽屉 - 置于高层，与私信弹窗同层级体系 */
        #private-inbox-drawer {
            position: fixed;
            top: 0;
            right: 0;
            width: 50%;
            max-width: 420px;
            height: 100%;
            background: rgba(5, 5, 5, 0.98);
            border-left: 1px solid rgba(0, 255, 65, 0.45);
            box-shadow: -4px 0 24px rgba(0, 0, 0, 0.5);
            z-index: 20002;
            transform: translateX(100%);
            transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            display: flex;
            flex-direction: column;
        }
        #private-inbox-drawer.active { transform: translateX(0); }
        .inbox-header { padding: 16px 20px; border-bottom: 1px solid rgba(0, 255, 65, 0.2); display: flex; justify-content: space-between; align-items: center; }
        .inbox-title { color: #00ff41; font-family: 'JetBrains Mono', monospace; font-size: 13px; font-weight: 700; }
        .inbox-close { background: none; border: none; color: #00ff41; font-size: 18px; cursor: pointer; }
        .inbox-body { flex: 1; overflow-y: auto; padding: 12px; }
        .inbox-item { background: rgba(0, 255, 65, 0.05); border: 1px solid rgba(0, 255, 65, 0.2); border-radius: 6px; padding: 12px; margin-bottom: 8px; display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 8px; }
        .inbox-item-info { font-size: 11px; color: #a1a1aa; }
        .inbox-item-btn { padding: 4px 10px; font-size: 10px; border: 1px solid rgba(0, 255, 65, 0.5); color: #00ff41; background: transparent; cursor: pointer; border-radius: 4px; transition: all 0.2s; }
        .inbox-item-btn:hover { background: rgba(0, 255, 65, 0.15); }
        .inbox-indicator { position: relative; }
        .inbox-indicator.has-new::after { content: ''; position: absolute; top: 2px; right: 2px; width: 6px; height: 6px; background: #ef4444; border-radius: 50%; }

        /* 阅后即焚阅读器 - 模糊渐显动画，置于最高层 */
        .burn-reader-overlay {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.85);
            z-index: 20003;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 24px;
        }
        .burn-reader-box {
            background: rgba(5, 5, 5, 0.98);
            border: 1px solid rgba(0, 255, 65, 0.45);
            border-radius: 8px;
            padding: 24px;
            max-width: 400px;
            width: 100%;
        }
        .burn-reader-content {
            filter: blur(12px);
            opacity: 0;
            animation: burn-reveal 1.2s ease-out forwards;
        }
        @keyframes burn-reveal {
            0% { filter: blur(12px); opacity: 0; }
            100% { filter: blur(0); opacity: 1; }
        }
        .burn-reader-countdown {
            margin-top: 12px;
            font-size: 11px;
            color: #71717a;
            font-family: 'JetBrains Mono', monospace;
        }
        
        /* 悬浮抽屉式列表样式 */
        .live-nodes-drawer {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            z-index: 100;
            transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .live-nodes-drawer.collapsed {
            transform: translateY(calc(100% - 48px));
        }
        
        .live-nodes-drawer.expanded {
            transform: translateY(0);
        }
        
        .live-nodes-header {
            background: rgba(24, 24, 27, 0.9);
            backdrop-filter: blur(16px);
            -webkit-backdrop-filter: blur(16px);
            border-top: 2px solid var(--accent-terminal);
            box-shadow: 0 -4px 20px rgba(0, 255, 65, 0.2);
            padding: 12px 16px;
            cursor: pointer;
            user-select: none;
            display: flex;
            align-items: center;
            justify-content: space-between;
            transition: all 0.3s ease;
        }
        
        .live-nodes-header:hover {
            background: rgba(24, 24, 27, 0.95);
            box-shadow: 0 -4px 30px rgba(0, 255, 65, 0.3);
        }
        
        .live-nodes-content {
            background: rgba(24, 24, 27, 0.85);
            backdrop-filter: blur(16px);
            -webkit-backdrop-filter: blur(16px);
            border-top: 1px solid rgba(0, 255, 65, 0.2);
            max-height: 400px;
            overflow-y: auto;
            transition: all 0.3s ease;
        }
        
        #online-users-list {
            max-height: 400px;
            overflow-y: auto;
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            padding: 12px !important;
            align-items: center; /* 确保头像垂直对齐 */
        }
        
        /* 紧凑排列的用户头像 */
        .user-avatar-compact {
            position: relative;
            width: 36px;
            height: 36px;
            border-radius: 50%;
            border: 2px solid rgba(0, 255, 65, 0.3);
            cursor: pointer;
            transition: all 0.2s ease;
            /* 移除 overflow: hidden 以允许显示内部的绝对定位弹窗 */
            /* overflow: hidden; */
            flex-shrink: 0;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .user-avatar-compact:hover {
            border-color: rgba(0, 255, 65, 0.8);
            transform: scale(1.1);
            z-index: 10;
            box-shadow: 0 0 12px rgba(0, 255, 65, 0.5);
        }
        
        .user-avatar-compact.busy {
            cursor: not-allowed;
            opacity: 0.6;
            border-color: rgba(255, 140, 0, 0.3);
        }
        
        .user-avatar-compact.busy:hover {
            border-color: rgba(255, 140, 0, 0.5);
            box-shadow: 0 0 12px rgba(255, 140, 0, 0.3);
        }
        
        .user-avatar-compact img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 50%; /* 确保图片本身也是圆形的 */
        }
        
        /* 拟态风格弹窗 - 从活跃节点框上边缘推出，不遮挡抽屉（fixed 定位由 JS 计算） */
        .user-popup {
            position: fixed;
            font-size: 13px;
            width: 300px;
            max-width: calc(100vw - 40px);
            background: linear-gradient(145deg, #1e1e22 0%, #25252a 100%);
            border: none;
            border-radius: 12px;
            padding: 16px;
            z-index: 10001;
            box-shadow: 6px 6px 14px rgba(0, 0, 0, 0.5),
                        -6px -6px 14px rgba(50, 50, 55, 0.4),
                        inset 1px 1px 0 rgba(255, 255, 255, 0.04);
            animation: popup-appear 0.2s ease-out;
            pointer-events: auto;
            white-space: normal;
            overflow-x: hidden;
            overflow-y: hidden;
        }
        /* 从活跃节点框上边缘推出：自下而上滑出，拟物感 */
        .user-popup.emerged-from-drawer {
            animation: popup-emerge-from-drawer 0.28s cubic-bezier(0.22, 1, 0.36, 1) forwards;
        }
        @keyframes popup-emerge-from-drawer {
            from {
                opacity: 0;
                transform: translateX(-50%) translateY(18px);
            }
            to {
                opacity: 1;
                transform: translateX(-50%) translateY(0);
            }
        }
        
        /* 箭头水平位置由 JS 设置 --arrow-left，对准头像中心 */
        .user-popup::before {
            content: '';
            position: absolute;
            bottom: -8px;
            left: var(--arrow-left, 50%);
            transform: translateX(-50%);
            width: 0;
            height: 0;
            border-left: 8px solid transparent;
            border-right: 8px solid transparent;
            border-top: 8px solid #25252a;
            filter: drop-shadow(0 2px 2px rgba(0,0,0,0.3));
        }
        
        .user-popup.top-position::before {
            bottom: auto;
            top: -8px;
            border-top: none;
            border-bottom: 8px solid #25252a;
        }
        
        @keyframes popup-appear {
            from {
                opacity: 0;
                transform: translateX(-50%) translateY(6px);
            }
            to {
                opacity: 1;
                transform: translateX(-50%) translateY(0);
            }
        }
        /* 贴边时无 translateX，仅淡入 */
        .user-popup.edge-position {
            animation: popup-appear-edge 0.22s ease-out forwards;
        }
        @keyframes popup-appear-edge {
            from { opacity: 0; transform: translateY(8px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .user-popup-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 12px;
            padding-bottom: 12px;
            border-bottom: 1px solid rgba(0, 255, 65, 0.2);
        }
        
        .user-popup-avatar-link {
            display: block;
            flex-shrink: 0;
            cursor: pointer;
        }
        
        .user-popup-avatar-link .user-popup-avatar {
            display: block;
        }
        
        .user-popup-avatar {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            border: 2px solid rgba(0, 255, 65, 0.5);
            object-fit: cover;
        }
        
        .user-popup-info {
            flex: 1;
            min-width: 0;
        }
        
        .user-popup-name {
            font-size: 1em;
            font-weight: bold;
            color: #00ff41;
            font-family: 'JetBrains Mono', monospace;
            margin-bottom: 4px;
            word-break: break-all;
        }
        
        .user-popup-status {
            font-size: 0.85em;
            color: rgba(0, 255, 65, 0.7);
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .user-popup-repo {
            margin-top: 12px;
            padding: 10px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 8px;
            box-shadow: inset 2px 2px 4px rgba(0, 0, 0, 0.3);
        }
        
        .user-popup-repo-title {
            font-size: 0.85em;
            color: rgba(0, 255, 65, 0.7);
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 8px;
        }
        
        .user-popup-repo-list {
            font-size: 1em;
            color: rgba(255, 255, 255, 0.9);
            font-family: 'JetBrains Mono', monospace;
            max-height: 140px;
            overflow-x: hidden;
            overflow-y: auto;
        }
        
        .user-popup-repo-item {
            position: relative;
            padding: 6px 8px;
            margin-bottom: 4px;
            border-radius: 6px;
            border-bottom: 1px solid rgba(0, 255, 65, 0.1);
            cursor: pointer;
            transition: background 0.2s, box-shadow 0.2s;
            word-break: break-word;
            overflow-wrap: break-word;
        }
        
        .user-popup-repo-item-meta {
            font-size: 0.8em;
            color: rgba(255, 255, 255, 0.5);
            margin-top: 2px;
        }
        
        .user-popup-repo-meta-gap {
            display: inline-block;
            width: 1em;
        }
        
        .user-popup-repo-item:hover {
            background: rgba(0, 255, 65, 0.08);
            box-shadow: 2px 2px 6px rgba(0, 0, 0, 0.2);
        }
        
        .user-popup-repo-item:last-child {
            border-bottom: none;
        }
        
        a.user-popup-repo-item {
            text-decoration: none;
            color: inherit;
            display: block;
        }
        
        /* 单仓库星标卡片（仅展示 Star 最高的一个） */
        .user-popup-repo-star-card {
            display: block;
            text-decoration: none;
            color: inherit;
            padding: 12px 14px;
            margin: 0;
            border-radius: 10px;
            border: 1px solid rgba(0, 255, 65, 0.25);
            background: linear-gradient(145deg, rgba(0, 255, 65, 0.06) 0%, rgba(0, 0, 0, 0.3) 100%);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.25);
            transition: border-color 0.2s, box-shadow 0.2s, transform 0.2s;
            word-break: break-word;
        }
        .user-popup-repo-star-card:hover {
            border-color: rgba(0, 255, 65, 0.5);
            box-shadow: 0 6px 16px rgba(0, 255, 65, 0.15);
            transform: translateY(-1px);
        }
        .user-popup-repo-star-card .repo-card-name {
            font-weight: 600;
            font-size: 1em;
            color: #00ff41;
            margin-bottom: 4px;
            display: -webkit-box;
            -webkit-box-orient: vertical;
            -webkit-line-clamp: 1;
            line-clamp: 1;
            overflow: hidden;
            word-break: break-all;
        }
        .user-popup-repo-star-card .repo-card-desc {
            font-size: 0.85em;
            color: rgba(255, 255, 255, 0.7);
            line-height: 1.35;
            margin-bottom: 8px;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }
        .user-popup-repo-star-card .repo-card-meta {
            font-size: 0.8em;
            color: rgba(255, 255, 255, 0.5);
            display: flex;
            align-items: center;
            gap: 12px;
            flex-wrap: wrap;
        }
        .user-popup-repo-star-card .repo-card-stars {
            color: #fbbf24;
            font-weight: 600;
        }
        .user-popup-repo-star-card .repo-card-updated {
            white-space: nowrap;
        }
        .user-popup-repo-empty {
            padding: 10px 0;
        }
        .user-popup-repo-fallback-link {
            display: block;
            margin-top: 6px;
            color: #00ff41;
            font-size: 0.9em;
            text-decoration: none;
        }
        .user-popup-repo-fallback-link:hover {
            text-decoration: underline;
        }
        
        /* 仓库项悬浮预览（介绍） */
        .user-popup-repo-item-tooltip {
            position: absolute;
            left: 100%;
            top: 50%;
            transform: translateY(-50%);
            margin-left: 8px;
            width: 200px;
            padding: 8px 10px;
            background: linear-gradient(145deg, #25252a 0%, #1e1e22 100%);
            border-radius: 8px;
            box-shadow: 4px 4px 12px rgba(0, 0, 0, 0.5);
            font-size: 0.9em;
            color: rgba(255, 255, 255, 0.85);
            line-height: 1.4;
            white-space: normal;
            z-index: 10002;
            pointer-events: none;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.15s, visibility 0.15s;
        }
        
        .user-popup-repo-item:hover .user-popup-repo-item-tooltip {
            opacity: 1;
            visibility: visible;
        }
        
        .user-popup-repo-item-tooltip.no-desc {
            font-style: italic;
            color: rgba(255, 255, 255, 0.45);
        }
        
        .user-popup-actions {
            display: flex;
            gap: 8px;
            margin-top: 12px;
        }
        
        .user-popup-btn-icon {
            flex: none;
            width: 36px;
            height: 36px;
            padding: 0;
            font-size: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .user-popup-btn {
            flex: 1;
            padding: 8px 12px;
            background: rgba(0, 255, 65, 0.1);
            border: 1px solid rgba(0, 255, 65, 0.4);
            color: #00ff41;
            font-size: 1em;
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 1px;
            cursor: pointer;
            transition: all 0.2s ease;
            font-family: 'JetBrains Mono', monospace;
        }
        
        .user-popup-btn:hover {
            background: rgba(0, 255, 65, 0.2);
            border-color: rgba(0, 255, 65, 0.8);
            box-shadow: 0 0 8px rgba(0, 255, 65, 0.3);
        }
        
        .user-popup-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        .user-popup-btn.repo-btn {
            background: rgba(0, 255, 65, 0.05);
        }
        
        .user-popup-btn.repo-btn:hover {
            background: rgba(0, 255, 65, 0.15);
        }
        
        .user-popup-repo-list::-webkit-scrollbar {
            width: 4px;
        }
        
        .user-popup-repo-list::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.3);
        }
        
        .user-popup-repo-list::-webkit-scrollbar-thumb {
            background: rgba(0, 255, 65, 0.4);
            border-radius: 2px;
        }
        
        .user-popup-repo-list::-webkit-scrollbar-thumb:hover {
            background: rgba(0, 255, 65, 0.6);
        }
        
        .live-nodes-content::-webkit-scrollbar {
            width: 6px;
        }
        
        .live-nodes-content::-webkit-scrollbar-track {
            background: rgba(39, 39, 42, 0.5);
        }
        
        .live-nodes-content::-webkit-scrollbar-thumb {
            background: rgba(0, 255, 65, 0.3);
            border-radius: 3px;
        }
        
        .live-nodes-content::-webkit-scrollbar-thumb:hover {
            background: rgba(0, 255, 65, 0.5);
        }
        
        .chevron-icon {
            transition: transform 0.3s ease;
            width: 16px !important;
            height: 16px !important;
            max-width: 16px !important;
            max-height: 16px !important;
            display: inline-block;
            flex-shrink: 0;
        }
        
        .live-nodes-drawer.expanded .chevron-icon {
            transform: rotate(180deg);
        }
        
        /* 防止 SVG 图标在页面加载时放大到全屏 */
        svg {
            max-width: 100%;
            max-height: 100%;
        }
        
        .user-item-verified {
            border-left: 2px solid var(--accent-terminal);
        }
        
        .user-item-anonymous {
            opacity: 0.7;
        }
        
        .github-link-icon {
            width: 14px;
            height: 14px;
            opacity: 0.6;
            transition: opacity 0.2s ease;
        }
        
        .user-item:hover .github-link-icon {
            opacity: 1;
        }

        /* =========================
           右侧抽屉：高分图谱排行榜（旧：横向滑动 + 指示器；新：6 张纵向卡片）
           ========================= */
        .lpdef-carousel {
            display: flex;
            overflow-x: auto;
            scroll-snap-type: x mandatory;
            -webkit-overflow-scrolling: touch;
            gap: 12px;
            padding: 6px 0 2px 0;
        }
        .lpdef-carousel::-webkit-scrollbar { height: 6px; }
        .lpdef-carousel::-webkit-scrollbar-thumb { background: rgba(0,255,65,0.25); border-radius: 999px; }
        .lpdef-page {
            flex: 0 0 100%;
            scroll-snap-align: start;
            border: 1px solid rgba(255,255,255,0.10);
            background: rgba(9, 9, 9, 0.45);
            padding: 10px;
            text-align: center; /* 整体文本居中 */
        }
        .lpdef-page-title {
            font-size: 12px;
            color: #e5e7eb;
            font-weight: 800;
            letter-spacing: 0.08em;
            text-transform: uppercase;
            margin-bottom: 10px;
        }
        .lpdef-rank-list {
            display: flex;
            flex-direction: column;
            gap: 8px; /* 间距调整 */
        }
        .lpdef-rank-row {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 8px;
            padding: 7px 9px;
            border: 1px solid rgba(255,255,255,0.08);
            background: rgba(0,0,0,0.25);
        }
        .lpdef-rank-left {
            display: flex;
            align-items: center;
            gap: 8px; /* 更紧凑，避免挤压分值 */
            min-width: 0;
            flex: 1 1 auto; /* 左侧可压缩，避免挤掉分值 */
            text-align: left; /* 行内依然左对齐更易读 */
        }
        .lpdef-rank-badge {
            width: 22px;
            height: 22px;
            border-radius: 999px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-size: 11px;
            font-weight: 800;
            border: 1px solid rgba(0,255,65,0.35);
            color: #00ff41;
            flex: 0 0 auto;
        }
        .lpdef-rank-rn {
            width: 38px;
            flex: 0 0 auto;
            text-align: left;
            font-size: 11px;
            color: rgba(255, 255, 255, 0.40);
            font-variant-numeric: tabular-nums;
        }
        .lpdef-rank-avatar {
            width: 20px;
            height: 20px;
            border-radius: 999px;
            object-fit: cover;
            border: 1px solid rgba(0,255,65,0.25);
            flex: 0 0 auto;
        }
        .lpdef-name-wrap {
            display: flex;
            align-items: center;
            gap: 6px;
            min-width: 0;
            flex: 1 1 auto;
        }
        .lpdef-rank-name {
            font-size: 11px;
            color: #e5e7eb;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            /* 关键：让名字在 flex 中可缩，不挤占分值空间 */
            min-width: 0;
            flex: 1 1 auto;
        }
        .lpdef-persona-tag {
            font-size: 10px;
            color: rgba(255, 255, 255, 0.40);
            font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
            flex: 0 0 auto;
            white-space: nowrap;
        }
        .lpdef-rank-score {
            font-size: 12px;
            font-weight: 800;
            color: var(--accent-terminal); /* cyberpunk green */
            font-variant-numeric: tabular-nums;
            text-align: right;
            flex: 0 0 auto; /* 不缩，防止 275.3k 被截断 */
            font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
            min-width: 72px; /* 右侧定宽：一行清晰显示“名次/用户/分数” */
        }

        /* 新布局：6 张纵向卡片 */
        .lpdef-metric-cards {
            display: flex;
            flex-direction: column;
            gap: 12px;
            padding: 6px 0 2px 0;
        }
        .lpdef-metric-card {
            border: 1px solid rgba(255,255,255,0.10);
            background: rgba(9, 9, 9, 0.45);
            padding: 10px;
        }
        .lpdef-metric-title {
            font-size: 12px;
            color: #e5e7eb;
            font-weight: 800;
            letter-spacing: 0.08em;
            text-transform: uppercase;
            margin-bottom: 8px;
            text-align: left;
        }
        .lpdef-rank-right {
            display: flex;
            align-items: center;
            gap: 10px;
            flex: 0 0 auto;
        }
        .lpdef-rank-delta {
            min-width: 54px;
            text-align: right;
            font-size: 11px;
            font-weight: 800;
            color: rgba(255,255,255,0.35);
            font-variant-numeric: tabular-nums;
            font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
            flex: 0 0 auto;
        }
        .lpdef-rank-delta.up { color: #00ff41; }
        .lpdef-rank-delta.down { color: #f87171; }
        .lpdef-rank-delta.flat { color: rgba(255,255,255,0.45); }
        .lpdef-rank-delta.na { color: rgba(255,255,255,0.28); }
        .lpdef-rank-header-row {
            background: rgba(255,255,255,0.03);
            border-color: rgba(255,255,255,0.10);
            padding-top: 6px;
            padding-bottom: 6px;
        }
        .lpdef-rank-header-row .lpdef-rank-rn,
        .lpdef-rank-header-row .lpdef-rank-name,
        .lpdef-rank-header-row .lpdef-rank-score,
        .lpdef-rank-header-row .lpdef-rank-delta {
            font-size: 10px;
            font-weight: 700;
            color: rgba(255,255,255,0.35);
        }
        .lpdef-rank-header-row .lpdef-rank-score { min-width: 72px; }
        .lpdef-rank-header-row .lpdef-rank-delta { min-width: 54px; }

        /* 窄屏进一步收紧：隐藏可选标签，确保三段信息一行显示 */
        @media (max-width: 420px) {
            .lpdef-rank-left { gap: 8px; }
            .lpdef-rank-rn { width: 34px; }
            .lpdef-rank-avatar { width: 18px; height: 18px; }
            .lpdef-persona-tag { display: none; }
            .lpdef-rank-score { min-width: 64px; font-size: 11px; }
            .lpdef-rank-name { min-width: 0; }
            .lpdef-rank-delta { min-width: 46px; font-size: 10px; }
            .lpdef-rank-header-row .lpdef-rank-delta { min-width: 46px; }
        }
        .lpdef-indicators {
            display: flex;
            gap: 6px;
            justify-content: center;
            margin: 4px 0 10px 0;
            flex-wrap: wrap;
        }
        .lpdef-indicator-btn {
            border: 1px solid rgba(0,255,65,0.28);
            background: rgba(0,255,65,0.06);
            color: rgba(0,255,65,0.85);
            font-size: 10px;
            padding: 4px 8px;
            letter-spacing: 0.06em;
            text-transform: uppercase;
            cursor: pointer;
        }
        .lpdef-indicator-btn.active {
            border-color: rgba(0,255,65,0.75);
            background: rgba(0,255,65,0.12);
            color: #00ff41;
            box-shadow: 0 0 0 1px rgba(0,255,65,0.18) inset;
        }

        /* LPDEF 卡片动画 */
        @keyframes lpdef-scan {
            0% {
                box-shadow: 0 0 0 0 rgba(0, 255, 65, 0);
            }
            50% {
                box-shadow: 0 0 20px 5px rgba(0, 255, 65, 0.5);
            }
            100% {
                box-shadow: 0 0 0 0 rgba(0, 255, 65, 0);
            }
        }

        @keyframes lpdef-flash {
            0%, 100% { opacity: 1; }
            25% { opacity: 0.3; }
            50% { opacity: 0.6; }
            75% { opacity: 0.3; }
        }

        .lpdef-card.scanning {
            animation: lpdef-scan 1.5s ease-in-out;
        }

        .lpdef-card.recalculating {
            animation: lpdef-flash 0.8s ease-in-out;
        }

        .lpdef-card.recalculating::after {
            content: '数据重算...';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 0, 0, 0.9);
            color: var(--accent-terminal);
            padding: 8px 16px;
            border: 1px solid var(--accent-terminal);
            font-size: 10px;
            font-weight: bold;
            z-index: 10;
            pointer-events: none;
        }

        /* LPDEF 容器扫描动画 */
        @keyframes lpdef-container-scan {
            0% {
                box-shadow: 0 0 0 0 rgba(0, 255, 65, 0);
            }
            50% {
                box-shadow: 0 0 30px 10px rgba(0, 255, 65, 0.6);
            }
            100% {
                box-shadow: 0 0 0 0 rgba(0, 255, 65, 0);
            }
        }

        #lpdef-container.lpdef-scan {
            animation: lpdef-container-scan 1.5s ease-in-out;
        }

        /* 光条扫描效果 */
        @keyframes lpdef-light-sweep {
            0% {
                background-position: -100% 0;
            }
            100% {
                background-position: 200% 0;
            }
        }

        #lpdef-container.lpdef-scan::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(
                90deg,
                transparent 0%,
                rgba(0, 255, 65, 0.3) 50%,
                transparent 100%
            );
            background-size: 200% 100%;
            animation: lpdef-light-sweep 1.5s ease-in-out;
            pointer-events: none;
            z-index: 1;
        }
        /* =========================
           Right Drawer Template (right.html) - namespaced
           ========================= */
        .country-panel-template {
            color: #ffffff;
            font-family: 'JetBrains Mono', monospace;
            line-height: 1.4;
        }
        .country-panel-template #rtPanelTitle {
            line-height: 1.3;
            -webkit-font-smoothing: antialiased;
            text-rendering: optimizeLegibility;
        }

        .country-panel-template .report-container {
            width: 100%;
            max-width: 100%;
            padding: 0 2px;
            position: relative;
        }
        /* 国家面板头部：防止「已累计分析 xxx 万字」等文字被裁切、改善行高与间距 */
        .country-panel-template .report-container .border-b-2 {
            overflow: visible;
        }
        .country-panel-template .report-container .border-b-2 .mt-3 {
            line-height: 1.45;
            min-height: 1.6em;
            overflow: visible;
        }
        .country-panel-template #rtMeritBoard {
            line-height: 1.45;
            vertical-align: middle;
            padding: 5px 10px;
            min-height: 1.6em;
            display: inline-block;
            overflow: visible;
        }
        /* 坐标/状态行：避免「网络不稳」等长文案挤在一起 */
        .country-panel-template .report-container .text-zinc-500.flex.justify-between {
            padding: 8px 0 4px 0;
            line-height: 1.4;
            flex-wrap: wrap;
            gap: 4px 12px;
        }
        .country-panel-template #rtCoord,
        .country-panel-template #rtDataStatus {
            white-space: normal;
            word-break: break-word;
        }

        .country-panel-template .clinic-card {
            border: 1px solid rgba(0, 255, 65, 0.22);
            background: rgba(5, 5, 5, 0.92);
            padding: 16px;
            margin-bottom: 16px;
            position: relative;
            box-shadow: 0 0 20px rgba(0, 255, 65, 0.03);
        }

        .country-panel-template .clinic-card::before {
            content: ">>";
            position: absolute;
            top: -2px;
            left: 12px;
            background: var(--bg-color);
            padding: 0 6px;
            color: #00ff41;
            font-size: 12px;
            font-weight: 700;
        }

        .country-panel-template .card-header {
            display: flex;
            align-items: center;
            gap: 10px;
            border-bottom: 1px solid rgba(0, 255, 65, 0.22);
            padding-bottom: 10px;
            margin-bottom: 14px;
        }

        .country-panel-template .card-header i {
            width: 18px;
            height: 18px;
            color: #00ff41;
        }

        /* hrdkm+B6GZW 色系: #0A0A0A #2f2f2f #6a6a6a #00FF88 */
        .country-panel-template .card-title {
            font-family: var(--font-mono-stack);
            font-size: 12px;
            color: var(--accent-terminal);
            text-transform: uppercase;
            letter-spacing: 1px;
            font-weight: 600;
        }

        .country-panel-template .metric-label {
            font-family: var(--font-mono-stack);
            font-size: 9px;
            font-weight: 600;
            color: var(--text-dim);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .country-panel-template .metric-value {
            font-family: 'Space Grotesk', system-ui, sans-serif;
            font-size: 18px;
            font-weight: 700;
            color: var(--text-main);
            letter-spacing: -0.5px;
        }

        .country-panel-template .stat-bar-container {
            height: 6px;
            background: var(--bg-color);
            margin-top: 6px;
            position: relative;
            border: 1px solid var(--border-ui);
        }

        .country-panel-template .stat-bar-fill {
            height: 100%;
            background: var(--accent-terminal);
            box-shadow: 0 0 10px rgba(0, 255, 136, 0.4);
        }

        .country-panel-template .pk-track {
            height: 14px;
            background: var(--bg-color);
            display: flex;
            position: relative;
            border: 1px solid var(--border-ui);
        }

        .country-panel-template .pk-left {
            background: var(--text-main);
            height: 100%;
        }

        .country-panel-template .pk-right {
            background: var(--accent-terminal);
            height: 100%;
        }

        .country-panel-template .pk-divider {
            position: absolute;
            left: 50%;
            top: -4px;
            bottom: -4px;
            width: 2px;
            background: #ffffff;
            z-index: 10;
        }

        .country-panel-template .scrolling-wrapper {
            display: flex;
            flex-wrap: nowrap;
            overflow-x: auto;
            gap: 12px;
            padding-bottom: 10px;
            scrollbar-width: none;
        }

        .country-panel-template .scrolling-wrapper::-webkit-scrollbar {
            display: none;
        }

        .country-panel-template .user-avatar-card {
            flex: 0 0 108px;
            text-align: center;
            background: rgba(13, 13, 13, 0.95);
            border: 1px solid rgba(0, 255, 65, 0.18);
            padding: 10px;
        }

        .country-panel-template .avatar-circle {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            margin: 0 auto 8px;
            border: 2px solid #00ff41;
            background: #111;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 800;
            color: #00ff41;
            font-size: 12px;
        }

        .country-panel-template .cloud-tag {
            display: inline-block;
            margin: 4px;
            padding: 2px 8px;
            border: 1px solid rgba(255, 255, 255, 0.12);
            transition: all 0.2s;
        }

        .country-panel-template .cloud-tag:hover {
            border-color: #00ff41;
            color: #00ff41;
        }

        /* 语义爆发词云：按类别上色（slang/merit/sv_slang） */
        .country-panel-template .cloud-tag.slang {
            border-color: rgba(168, 85, 247, 0.65); /* #A855F7 */
            background: rgba(168, 85, 247, 0.12);
            color: #d8b4fe;
            box-shadow: 0 0 10px rgba(168, 85, 247, 0.16);
        }
        .country-panel-template .cloud-tag.merit {
            border-color: rgba(16, 185, 129, 0.65); /* #10B981 */
            background: rgba(16, 185, 129, 0.12);
            color: #6ee7b7;
            box-shadow: 0 0 10px rgba(16, 185, 129, 0.14);
        }
        .country-panel-template .cloud-tag.sv_slang {
            border-color: rgba(249, 115, 22, 0.65); /* #F97316 */
            background: rgba(249, 115, 22, 0.12);
            color: #fdba74;
            box-shadow: 0 0 10px rgba(249, 115, 22, 0.14);
        }
        .country-panel-template .cloud-tag.slang:hover,
        .country-panel-template .cloud-tag.merit:hover,
        .country-panel-template .cloud-tag.sv_slang:hover {
            filter: brightness(1.08);
        }

        /* 语义爆发词云：无额外切换控件 */

        .country-panel-template .chart-container {
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 16px 0;
        }

        .country-panel-template .status-tag {
            font-size: 10px;
            padding: 3px 8px;
            border: 1px solid #00ff41;
            color: #00ff41;
            font-weight: 800;
        }

        .country-panel-template .status-tag.invert {
            background: #00ff41;
            color: #050505;
        }

        /* LIVE_FEED：线框和背景绿色，文字白色 */
        .country-panel-template #rtStatusTag {
            background: rgba(0, 255, 65, 0.4) !important;
            color: #ffffff !important;
            border: 1px solid rgba(0, 255, 65, 0.9) !important;
        }

        /* 人格分布：竖向柱状图（圆角柱 + 类型缩写 + 文字名称 + 百分比） */
        .personality-vbar-chart {
            background: transparent;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 6px 10px;
            align-items: flex-end;
            min-height: 140px;
        }
        .personality-vbar-col {
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 52px;
            flex-shrink: 0;
        }
        .personality-vbar-bar-wrap {
            width: 100%;
            height: 72px;
            display: flex;
            flex-direction: column;
            justify-content: flex-end;
            margin-bottom: 4px;
        }
        .personality-vbar-fill {
            width: 100%;
            min-height: 4px;
            border-radius: 4px 4px 0 0;
            background: linear-gradient(180deg, rgba(0, 255, 65, 0.65) 0%, rgba(0, 255, 65, 0.25) 100%);
            transition: height 0.35s ease-out;
        }
        .personality-vbar-label {
            font-size: 10px;
            font-weight: 700;
            font-family: 'JetBrains Mono', monospace;
            text-transform: uppercase;
            letter-spacing: 0.02em;
            color: rgba(255, 255, 255, 0.95);
        }
        .personality-vbar-name {
            font-size: 9px;
            color: rgba(255, 255, 255, 0.6);
            text-align: center;
            line-height: 1.2;
            max-width: 52px;
            overflow: hidden;
            text-overflow: ellipsis;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            line-clamp: 2;
            -webkit-box-orient: vertical;
            margin-top: 1px;
        }
        .personality-vbar-pct {
            font-size: 9px;
            font-weight: 700;
            font-family: 'JetBrains Mono', monospace;
            color: rgba(0, 255, 65, 0.95);
            font-variant-numeric: tabular-nums;
            margin-top: 2px;
        }

        /* Leaflet 自定义用户光标样式 */
        .custom-user-marker {
            background: transparent !important;
            border: none !important;
            box-shadow: none !important;
        }
        .custom-user-marker div {
            pointer-events: none;
        }

        /* 国家选择下拉菜单样式 - 赛博朋克风格 */
        .country-select-dropdown {
            appearance: none;
            -webkit-appearance: none;
            -moz-appearance: none;
            background: rgba(0, 0, 0, 0.6);
            border: 1px solid rgba(0, 255, 65, 0.4);
            border-radius: 2px;
            color: #00ff41;
            font-family: 'JetBrains Mono', monospace;
            font-size: 11px;
            font-weight: 700;
            cursor: pointer;
            outline: none;
            padding: 6px 24px 6px 8px;
            transition: all 0.2s;
            position: relative;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='10' height='10' viewBox='0 0 10 10'%3E%3Cpath fill='%2300ff41' d='M5 7L1 3h8z'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 8px center;
            box-shadow: 0 0 8px rgba(0, 255, 65, 0.2);
        }
        .country-select-dropdown:hover {
            border-color: rgba(0, 255, 65, 0.7);
            box-shadow: 0 0 12px rgba(0, 255, 65, 0.4);
            background-color: rgba(0, 255, 65, 0.05);
        }
        .country-select-dropdown:focus {
            border-color: #00ff41;
            box-shadow: 0 0 16px rgba(0, 255, 65, 0.6);
            background-color: rgba(0, 255, 65, 0.1);
        }
        .country-select-dropdown option {
            background: #050505 !important;
            color: #00ff41 !important;
            padding: 8px 12px;
            border: none;
        }
        .country-select-dropdown option:hover,
        .country-select-dropdown option:focus {
            background: rgba(0, 255, 65, 0.2) !important;
            color: #00ff41 !important;
        }
        .country-select-dropdown option:checked,
        .country-select-dropdown option[selected] {
            background: rgba(0, 255, 65, 0.3) !important;
            color: #00ff41 !important;
        }
        /* 下拉菜单滚动条样式 - 赛博朋克绿色系 */
        .country-select-dropdown::-webkit-scrollbar {
            width: 8px;
        }
        .country-select-dropdown::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.8);
            border-left: 1px solid rgba(0, 255, 65, 0.2);
        }
        .country-select-dropdown::-webkit-scrollbar-thumb {
            background: rgba(0, 255, 65, 0.5);
            border-radius: 4px;
            border: 1px solid rgba(0, 255, 65, 0.3);
        }
        .country-select-dropdown::-webkit-scrollbar-thumb:hover {
            background: rgba(0, 255, 65, 0.7);
            box-shadow: 0 0 8px rgba(0, 255, 65, 0.4);
        }

        /* 脉动闪光效果 */
        @keyframes pulse-glow {
            0% {
                transform: scale(1);
                opacity: 1;
                box-shadow: 0 0 0 0 rgba(0, 255, 65, 0.7);
            }
            50% {
                transform: scale(1.1);
                opacity: 0.9;
                box-shadow: 0 0 20px 10px rgba(0, 255, 65, 0.4);
            }
            100% {
                transform: scale(1);
                opacity: 1;
                box-shadow: 0 0 0 0 rgba(0, 255, 65, 0);
            }
        }
        .pulse-marker {
            animation: pulse-glow 2s ease-in-out infinite;
        }

        /* 隐藏旧的工具按钮 */
        #map-cursor-tools {
            display: none !important;
        }

        /* 左侧抽屉国家选择菜单滚动条样式 */
        #left-drawer-country-list::-webkit-scrollbar {
            width: 6px;
        }
        #left-drawer-country-list::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.3);
        }
        #left-drawer-country-list::-webkit-scrollbar-thumb {
            background: rgba(0, 255, 65, 0.5);
            border-radius: 3px;
        }
        #left-drawer-country-list::-webkit-scrollbar-thumb:hover {
            background: rgba(0, 255, 65, 0.7);
        }

        /* 左侧抽屉搜索框样式 - 赛博朋克风格 */
        #left-drawer-country-search {
            transition: all 0.2s !important;
        }
        #left-drawer-country-search:hover {
            border-color: rgba(0, 255, 65, 0.7) !important;
            box-shadow: 0 0 12px rgba(0, 255, 65, 0.4) !important;
            background-color: rgba(0, 255, 65, 0.05) !important;
        }
        #left-drawer-country-search:focus {
            border-color: #00ff41 !important;
            box-shadow: 0 0 16px rgba(0, 255, 65, 0.6) !important;
            background-color: rgba(0, 255, 65, 0.1) !important;
        }
        #left-drawer-country-search::placeholder {
            color: rgba(0, 255, 65, 0.5);
        }
        /* 左侧抽屉国家列表：默认收起，仅点击搜索框后展开 */
        #left-drawer-country-list {
            max-height: 0;
            overflow: hidden;
            opacity: 0;
            transition: max-height 0.2s ease, opacity 0.2s ease;
            border: none !important;
            margin-bottom: 0 !important;
        }
        #left-drawer-country-list.left-drawer-country-list-visible {
            max-height: 200px;
            opacity: 1;
            overflow-y: auto;
            border: 1px solid rgba(0, 255, 65, 0.2) !important;
            margin-bottom: 0 !important;
        }

        /* 左侧抽屉：整体可滚动，drawer-body 为唯一滚动容器，便于查看所有内容（矩阵榜+身份卡片+词云） */
        #left-drawer .drawer-content {
            display: flex;
            flex-direction: column;
            min-height: 0;
            height: 100%;
        }
        #left-drawer-country-selector {
            flex-shrink: 0;
            z-index: 1;
        }
        #left-drawer-body.left-drawer-body {
            flex: 1 1 0;
            min-height: 0;
            display: flex;
            flex-direction: column;
            padding: 16px 20px;
            overflow-y: auto;
            overflow-x: hidden;
        }
        #left-drawer-body::-webkit-scrollbar {
            width: 8px;
        }
        #left-drawer-body::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.4);
            border-radius: 4px;
        }
        #left-drawer-body::-webkit-scrollbar-thumb {
            background: rgba(0, 255, 65, 0.6);
            border-radius: 4px;
        }
        #left-drawer-body::-webkit-scrollbar-thumb:hover {
            background: rgba(0, 255, 65, 0.85);
        }
        #left-drawer-body {
            scrollbar-width: thin;
            scrollbar-color: rgba(0, 255, 65, 0.6) rgba(0, 0, 0, 0.4);
        }
        #left-drawer-body .left-drawer-scroll {
            flex-shrink: 0;
            min-height: 120px;
            padding: 0 0 16px 0;
        }

        /* 本国词云卡片：与所有左抽屉卡片同宽、自适应背景（与 .drawer-item 一致） */
        #left-drawer-wordcloud-wrap.left-drawer-wordcloud-card {
            flex-shrink: 0;
            min-height: 200px;
            width: 100%;
            box-sizing: border-box;
            padding: 15px;
            background: var(--bg-card, rgba(0, 255, 65, 0.05));
            border: 1px solid var(--border-ui, rgba(0, 255, 65, 0.2));
            border-radius: 4px;
            margin: 0 0 0 0;
            transition: all 0.3s;
        }
        #left-drawer-wordcloud-wrap.left-drawer-wordcloud-card:hover {
            border-color: rgba(0, 255, 65, 0.5);
            background: var(--bg-card-hover, rgba(0, 255, 65, 0.1));
            box-shadow: 0 0 20px rgba(0, 255, 65, 0.2);
        }
        .left-drawer-wordcloud-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 10px;
        }
        .left-drawer-wordcloud-title {
            font-size: 11px;
            font-weight: 700;
            color: rgba(0, 255, 65, 0.9);
            font-family: 'JetBrains Mono', var(--font-mono-stack);
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        .left-drawer-wordcloud-hint {
            font-size: 10px;
            color: rgba(0, 255, 65, 0.55);
            font-family: 'JetBrains Mono', monospace;
        }
        .left-drawer-wordcloud-inner {
            padding: 12px;
            background: transparent;
            border: none;
            border-radius: 4px;
        }
        .left-drawer-wordcloud-meta-row {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 10px;
        }
        .left-drawer-wordcloud-label {
            font-size: 10px;
            color: rgba(0, 255, 65, 0.7);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        .left-drawer-wordcloud-meta {
            font-size: 10px;
            color: rgba(0, 255, 65, 0.5);
        }
        .left-drawer-wordcloud-tabs {
            display: flex;
            gap: 6px;
            margin-bottom: 10px;
        }
        .left-drawer-wordcloud-tab {
            padding: 6px 12px;
            font-size: 10px;
            font-family: 'JetBrains Mono', monospace;
            border: 1px solid rgba(0, 255, 65, 0.3);
            background: transparent;
            color: rgba(0, 255, 65, 0.6);
            border-radius: 2px;
            cursor: pointer;
            transition: all 0.2s;
        }
        .left-drawer-wordcloud-tab:hover {
            background: rgba(0, 255, 65, 0.08);
            color: rgba(0, 255, 65, 0.9);
        }
        .left-drawer-wordcloud-tab-active,
        .left-drawer-wordcloud-tabs .national-identity-tab.active {
            border-color: rgba(0, 255, 65, 0.7);
            background: rgba(0, 255, 65, 0.12);
            color: #00ff41;
        }
        /* 霸天 Tab 紫色高亮保留（与原有逻辑一致） */
        .left-drawer-wordcloud-tabs .national-identity-tab[data-level="Architect"].active {
            border-color: #5b21b6;
            background: rgba(91, 33, 182, 0.2);
            color: #a78bfa;
        }
        .left-drawer-wordcloud-canvas-wrap {
            position: relative;
            width: 100%;
            min-height: 160px;
            height: min(280px, 32vh);
            overflow: visible;
        }
        .left-drawer-wordcloud-canvas-wrap canvas {
            display: block;
            width: 100% !important;
            height: 100% !important;
        }
        .left-drawer-cloud-loading {
            position: absolute;
            inset: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(0, 0, 0, 0.5);
            color: rgba(0, 255, 65, 0.7);
            font-size: 12px;
            font-family: 'JetBrains Mono', monospace;
        }
        .left-drawer-wordcloud-empty {
            margin-top: 8px;
            padding: 10px;
            font-size: 12px;
            color: rgba(0, 255, 65, 0.5);
            font-style: italic;
        }
        #left-drawer-wordcloud-wrap #vibe-cloud50-container {
            overflow: visible;
        }
    