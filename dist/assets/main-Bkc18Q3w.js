const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["main.js","assets/sql.js-Bh3UTgnK.js","assets/i18n-H9AsZGLl.js"])))=>i.map(i=>d[i]);
!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))n(e);new MutationObserver(e=>{for(const o of e)if("childList"===o.type)for(const e of o.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&n(e)}).observe(document,{childList:!0,subtree:!0})}function n(e){if(e.ep)return;e.ep=!0;const n=function(e){const n={};return e.integrity&&(n.integrity=e.integrity),e.referrerPolicy&&(n.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?n.credentials="include":"anonymous"===e.crossOrigin?n.credentials="omit":n.credentials="same-origin",n}(e);fetch(e.href,n)}}();const e={},n=function(n,o,s){let t=Promise.resolve();if(o&&o.length>0){document.getElementsByTagName("link");const n=document.querySelector("meta[property=csp-nonce]"),s=(null==n?void 0:n.nonce)||(null==n?void 0:n.getAttribute("nonce"));t=Promise.allSettled(o.map(n=>{if((n=function(e){return"/cursor-lab/"+e}(n))in e)return;e[n]=!0;const o=n.endsWith(".css"),t=o?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${n}"]${t}`))return;const i=document.createElement("link");return i.rel=o?"stylesheet":"modulepreload",o||(i.as="script"),i.crossOrigin="",i.href=n,s&&i.setAttribute("nonce",s),document.head.appendChild(i),o?new Promise((e,o)=>{i.addEventListener("load",e),i.addEventListener("error",()=>o(new Error(`Unable to preload CSS for ${n}`)))}):void 0}))}function i(e){const n=new Event("vite:preloadError",{cancelable:!0});if(n.payload=e,window.dispatchEvent(n),!n.defaultPrevented)throw e}return t.then(e=>{for(const n of e||[])"rejected"===n.status&&i(n.reason);return n().catch(i)})};!async function(){const e=window.location.pathname,o=window.location.hostname,s="localhost"===o||"127.0.0.1"===o||o.includes("localhost")||o.includes("192.168."),t=o.includes("github.io"),i=o.includes("workers.dev")||o.includes("pages.dev");window.analysisModuleLoading=!0,window.analysisModuleError=null;let r="",l="";try{let o;if(s)console.log("[Main] 开发环境：直接导入 main.js"),o=await n(()=>import("../main.js"),__vite__mapDeps([0,1,2]));else{if(console.log("[Main] 生产环境：动态导入 main.js"),r="",t){const n=e.split("/").filter(e=>e).filter(e=>"index.html"!==e&&""!==e);if(n.length>0)r="/"+n[0];else{const e=window.location.pathname;if(e&&"/"!==e&&"/index.html"!==e){const n=e.split("/").filter(e=>e&&"index.html"!==e);n.length>0&&(r="/"+n[0])}}}else{const n=e.split("/").filter(e=>e&&"index.html"!==e);r=n.length>0?"/"+n[0]:""}r&&"/"!==r&&r.endsWith("/")&&(r=r.slice(0,-1)),console.log("[Path] 原始 pathname:",e),console.log("[Path] 检测到的 basePath:",r),console.log("[Path] isGitHubPages:",t),window.BASE_PATH=r,l=e.substring(0,e.lastIndexOf("/"))||"";const n=[];if(n.push("./main.js"),n.push("./dist/main.js"),r&&(n.push(`${r}/main.js`),n.push(`${r}/dist/main.js`)),n.push("/main.js"),n.push("/dist/main.js"),console.log("[Main] 当前 URL:",window.location.href),console.log("[Main] 当前路径:",e),console.log("[Main] 基础路径:",r),console.log("[Main] 当前目录:",l),console.log("[Main] 尝试路径列表:",n),console.log("[Main] 路径数量:",n.length),0===n.length)throw new Error("无法构建有效的模块路径。请检查部署配置。");let s=!1,i=null;const c=[];for(const e of n)try{console.log(`[Main] 尝试加载模块，路径: ${e}`),o=await import(e),console.log(`[Main] ✅ 成功加载模块，路径: ${e}`),s=!0;break}catch(a){const n={path:e,error:a.message,name:a.name};c.push(n),console.warn(`[Main] 路径 ${e} 加载失败:`,a.message),i=a}if(!s){console.error("[Main] ❌ 所有路径都加载失败"),console.error("[Main] 所有尝试的错误:",c),console.error("[Main] 最后尝试的错误:",i);const e=c.map(e=>`  - ${e.path}: ${e.error}`).join("\n");throw new Error(`模块加载失败：所有路径都尝试失败。\n尝试的路径：\n${e}\n\n请确认：\n1. 已运行 npm run build\n2. dist/main.js 文件存在\n3. 文件已正确部署到 GitHub Pages`)}}const c=["initializeParser","processFiles","renderFullDashboard","getGlobalStats","getVibeResult"].filter(e=>"function"!=typeof o[e]);if(c.length>0)throw console.error("[Main] 模块缺少必需的导出:",c),console.error("[Main] 模块实际导出:",Object.keys(o)),new Error(`模块缺少必需的导出函数: ${c.join(", ")}`);const{initializeParser:d,processFiles:u,renderFullDashboard:h,getGlobalStats:w,getVibeResult:p,getVibeAnalyzer:f,setGlobalStats:g,setVibeResult:m,setAllChatData:b,reanalyzeWithLanguage:y,updateNumberWithAnimation:P,formatNumber:E,fetchTotalTestUsers:M,reportNewUser:j,updateGlobalStats:A}=o;window.analysisModule={initializeParser:d,processFiles:u,renderFullDashboard:h,getGlobalStats:w,getVibeResult:p,getVibeAnalyzer:f||(()=>null),setGlobalStats:g||(()=>{}),setVibeResult:m||(()=>{}),setAllChatData:b||(()=>{}),reanalyzeWithLanguage:y||(async()=>null),updateNumberWithAnimation:P||(()=>{}),formatNumber:E||(e=>e.toString()),fetchTotalTestUsers:M||(async()=>0),reportNewUser:j||(async()=>{}),updateGlobalStats:A||(()=>{})};try{let o;if(s)o=await n(()=>import("./i18n-H9AsZGLl.js"),[]);else{const n=(void 0!==r?r:"")||window.BASE_PATH||"",s=(void 0!==l?l:"")||e.substring(0,e.lastIndexOf("/"))||"",c=[];if(i)c.push("./src/i18n.js"),c.push("src/i18n.js");else if(t){if(n){const e=n.startsWith("/")?n:"/"+n,o=e.endsWith("/")?e.slice(0,-1):e;c.push(`${o}/src/i18n.js`)}if(s&&c.push(`${s}/src/i18n.js`),window.BASE_PATH){const e=window.BASE_PATH.endsWith("/")?window.BASE_PATH.slice(0,-1):window.BASE_PATH;c.push(`${e}/src/i18n.js`)}c.push("./src/i18n.js"),c.push("src/i18n.js"),c.push("/src/i18n.js")}else c.push("./src/i18n.js"),c.push("src/i18n.js");console.log("[i18n] 当前 URL:",window.location.href),console.log("[i18n] 基础路径 (basePath):",void 0!==r?r:"undefined"),console.log("[i18n] 基础路径 (window.BASE_PATH):",window.BASE_PATH),console.log("[i18n] 有效基础路径:",n),console.log("[i18n] 当前目录:",s),console.log("[i18n] 尝试加载路径列表:",c);let d=!1,u=null;const h=[];for(const e of c)try{console.log(`[i18n] 尝试加载: ${e}`),o=await import(e),console.log(`[i18n] ✅ 成功加载: ${e}`),d=!0;break}catch(a){const n={path:e,error:a.message,name:a.name};h.push(n),console.warn(`[i18n] ❌ 路径 ${e} 加载失败:`,a.message),u=a}if(!d)throw console.error("[i18n] ❌ 所有 i18n 路径都加载失败"),console.error("[i18n] 所有尝试的错误:",h),console.error("[i18n] 最后尝试的错误:",u),new Error(`i18n 模块加载失败：所有路径都尝试失败。\n尝试的路径：\n${h.map(e=>`  - ${e.path}: ${e.error}`).join("\n")}\n\n请确认：\n1. 已运行 npm run build\n2. dist/src/i18n.js 文件存在\n3. 文件已正确部署到 GitHub Pages`)}window.i18n=o,console.log("[i18n] ✅ i18n 模块已成功加载，导出内容:",Object.keys(o))}catch(a){console.error("[i18n] ❌ i18n 模块加载失败:",a),window.i18n={getText:(e,n)=>(console.warn(`[i18n] 使用 fallback，返回 key: ${e}`),e),getI18nText:e=>({})}}console.log("[Main] 全局模块对象已创建:",{hasInitializeParser:"function"==typeof window.analysisModule.initializeParser,hasProcessFiles:"function"==typeof window.analysisModule.processFiles,hasRenderFullDashboard:"function"==typeof window.analysisModule.renderFullDashboard}),window.analysisModuleLoading=!1,window.analysisModuleError=null}catch(a){console.error("[Main] ❌ 模块加载失败:",a),window.analysisModuleLoading=!1,window.analysisModuleError=a,window.dispatchEvent(new CustomEvent("analysisModuleLoadFailed",{detail:{error:a}}))}}();
