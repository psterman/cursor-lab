<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cursor Ë°å‰∏∫‰ΩìÊ£Ä - Vibe Coding</title>
    <!-- API Á´ØÁÇπÈÖçÁΩÆÔºàCloudflare WorkersÔºâ -->
    <meta name="api-endpoint" content="https://cursor-clinical-analysis.psterman.workers.dev/">
    <!-- ÂºïÂÖ•ÂøÖË¶ÅÁöÑÂ∫ì -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/wordcloud2.js/1.1.0/wordcloud2.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&display=swap');
        body { font-family: 'JetBrains Mono', monospace; }
        .custom-scrollbar::-webkit-scrollbar { width: 4px; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: #27272a; border-radius: 10px; }
        /* ‰ªé index.html ÂºïÂÖ•ÁöÑÂÆåÊï¥Ê†∑Âºè */
        :root {
            --bg-color: #050505;
            --card-bg: rgba(23, 23, 23, 0.7);
            --card-border: rgba(255, 255, 255, 0.1);
            --text-main: #ededed;
            --text-dim: #a1a1a1;
            --accent-purple: #8b5cf6;
            --accent-blue: #3b82f6;
            --accent-gradient: linear-gradient(135deg, #8b5cf6 0%, #3b82f6 100%);
            --glass-blur: blur(12px);
        }
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-main);
            line-height: 1.6;
            overflow-x: hidden;
            background-image: 
                radial-gradient(circle at 20% 20%, rgba(139, 92, 246, 0.15) 0%, transparent 40%),
                radial-gradient(circle at 80% 80%, rgba(59, 130, 246, 0.15) 0%, transparent 40%);
        }
        .top-glow {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 2px;
            background: var(--accent-gradient);
            z-index: 1000;
        }
        .container {
            max-width: 1100px;
            margin: 0 auto;
            padding: 20px;
            padding-bottom: 80px;
        }
        header {
            text-align: center;
            padding: 60px 20px;
            animation: fadeInDown 0.8s ease-out;
        }
        .logo-box {
            display: inline-block;
            padding: 8px 16px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--card-border);
            border-radius: 20px;
            margin-bottom: 20px;
            font-size: 16px;
            color: var(--accent-blue);
            backdrop-filter: var(--glass-blur);
        }
        h1 {
            font-size: clamp(2rem, 5vw, 3.5rem);
            font-weight: 800;
            letter-spacing: -0.05em;
            background: linear-gradient(to bottom, #fff 30%, #a1a1a1 100%);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 15px;
        }
        .subtitle {
            color: var(--text-dim);
            font-size: 1.1rem;
        }
        .upload-icon {
            font-size: 48px;
            margin-bottom: 20px;
            display: block;
        }
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 20px;
            margin-top: 40px;
        }
        .stats-grid.hidden {
            display: none;
        }
        .stat-card {
            background: var(--card-bg);
            border: 1px solid var(--card-border);
            border-radius: 20px;
            padding: 24px;
            transition: transform 0.3s ease;
        }
        .stat-label {
            font-size: 16px;
            color: var(--text-dim);
            margin-bottom: 8px;
        }
        .stat-value {
            font-size: 36px;
            font-weight: 700;
            font-family: 'JetBrains Mono', monospace;
            color: #fff;
        }
        .stat-comparison {
            font-size: 14px;
            margin-top: 10px;
            color: var(--accent-purple);
            font-weight: 500;
        }
        .wordcloud-section {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 20px;
            margin-top: 40px;
        }
        .wordcloud-section.hidden {
            display: none;
        }
        .chart-card {
            background: var(--card-bg);
            border: 1px solid var(--card-border);
            border-radius: 24px;
            padding: 24px;
        }
        .chart-title {
            font-size: 20px;
            font-weight: 600;
            margin-bottom: 20px;
            color: var(--text-main);
        }
        .wordcloud-container {
            width: 100%;
            height: 400px;
            position: relative;
            background: transparent;
            border-radius: 12px;
            overflow: hidden;
        }
        .wordcloud-container canvas {
            width: 100% !important;
            height: 100% !important;
        }
        .prompts-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        .prompt-item {
            display: flex;
            align-items: center;
            gap: 16px;
            padding: 16px;
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid var(--card-border);
            border-radius: 12px;
            transition: all 0.2s ease;
        }
        .prompt-item:hover {
            background: rgba(255, 255, 255, 0.05);
            border-color: rgba(139, 92, 246, 0.3);
        }
        .prompt-rank {
            font-size: 16px;
            font-weight: 700;
            color: var(--accent-purple);
            min-width: 30px;
        }
        .prompt-text {
            flex: 1;
            font-size: 16px;
            color: var(--text-main);
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }
        .prompt-count {
            font-size: 15px;
            color: var(--text-dim);
            white-space: nowrap;
        }
        .chat-list-section {
            background: var(--card-bg);
            border: 1px solid var(--card-border);
            border-radius: 24px;
            overflow: hidden;
            backdrop-filter: var(--glass-blur);
        }
        .chat-list-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 20px;
            border-bottom: 1px solid var(--card-border);
            flex-wrap: wrap;
            gap: 12px;
        }
        .chat-list-title {
            font-size: 20px;
            font-weight: 600;
            color: var(--text-main);
        }
        .chat-list-controls {
            display: flex;
            gap: 12px;
        }
        .search-input {
            padding: 10px 16px;
            font-size: 16px;
            border: 1px solid var(--card-border);
            border-radius: 12px;
            width: 300px;
            background: rgba(255, 255, 255, 0.05);
            color: var(--text-main);
            font-family: inherit;
            transition: all 0.2s ease;
        }
        .search-input:focus {
            outline: none;
            border-color: var(--accent-purple);
            background: rgba(255, 255, 255, 0.08);
        }
        .search-input::placeholder {
            color: var(--text-dim);
        }
        .chat-list {
            max-height: 600px;
            overflow-y: auto;
        }
        .chat-item {
            padding: 16px 20px;
            border-bottom: 1px solid var(--card-border);
            transition: background 0.2s ease;
        }
        .chat-item:hover {
            background: rgba(255, 255, 255, 0.03);
        }
        .chat-item:last-child {
            border-bottom: none;
        }
        .chat-item-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 8px;
            flex-wrap: wrap;
            gap: 8px;
        }
        .chat-role {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 4px 10px;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
        }
        .role-user {
            background: rgba(59, 130, 246, 0.2);
            color: #60a5fa;
        }
        .role-ai {
            background: rgba(139, 92, 246, 0.2);
            color: #a78bfa;
        }
        .chat-time {
            font-size: 14px;
            color: var(--text-dim);
        }
        .chat-item-content {
            font-size: 16px;
            color: var(--text-dim);
            line-height: 1.6;
        }
        .chat-item-content p {
            margin: 0;
        }
        .pagination-container {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 20px;
            border-top: 1px solid var(--card-border);
            background: rgba(255, 255, 255, 0.02);
            flex-wrap: wrap;
            gap: 16px;
        }
        .pagination-info {
            font-size: 16px;
            color: var(--text-dim);
        }
        .pagination-controls {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .pagination-btn {
            padding: 8px 16px;
            font-size: 16px;
            border: 1px solid var(--card-border);
            border-radius: 12px;
            background: rgba(255, 255, 255, 0.05);
            color: var(--text-main);
            cursor: pointer;
            transition: all 0.2s ease;
            font-family: inherit;
        }
        .pagination-btn:hover:not(:disabled) {
            background: rgba(255, 255, 255, 0.1);
            border-color: var(--accent-purple);
        }
        .pagination-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        .pagination-pages {
            display: flex;
            align-items: center;
            gap: 4px;
        }
        .pagination-page-btn {
            min-width: 36px;
            height: 36px;
            padding: 0 12px;
            font-size: 16px;
            border: 1px solid var(--card-border);
            border-radius: 12px;
            background: rgba(255, 255, 255, 0.05);
            color: var(--text-main);
            cursor: pointer;
            transition: all 0.2s ease;
            font-family: inherit;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .pagination-page-btn:hover {
            background: rgba(255, 255, 255, 0.1);
            border-color: var(--accent-purple);
        }
        .pagination-page-btn.active {
            background: var(--accent-gradient);
            color: #fff;
            border-color: transparent;
        }
        .pagination-ellipsis {
            padding: 0 8px;
            color: var(--text-dim);
            font-size: 16px;
        }
        .vibe-codinger-section {
            margin-bottom: 32px;
        }
        .vibe-header {
            text-align: center;
            margin-bottom: 32px;
            padding-bottom: 24px;
            border-bottom: 2px solid var(--card-border);
        }
        .vibe-title {
            font-size: 26px;
            font-weight: 700;
            margin-bottom: 20px;
            color: var(--text-main);
        }
        .vibe-badge {
            display: inline-flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
            padding: 20px 40px;
            border-radius: 16px;
            margin-bottom: 16px;
            transition: transform 0.2s ease;
            backdrop-filter: var(--glass-blur);
        }
        .vibe-badge:hover {
            transform: translateY(-2px);
        }
        .vibe-type {
            font-size: 36px;
            font-weight: 700;
            letter-spacing: 2px;
            color: var(--text-main);
        }
        .vibe-name {
            font-size: 22px;
            font-weight: 600;
            color: var(--text-main);
        }
        .vibe-description {
            font-size: 16px;
            color: var(--text-dim);
            line-height: 1.6;
            max-width: 600px;
            margin: 0 auto;
        }
        .vibe-dimensions {
            margin-bottom: 32px;
        }
        .dimensions-title {
            font-size: 20px;
            font-weight: 600;
            margin-bottom: 20px;
            color: var(--text-main);
        }
        .dimension-card {
            background: rgba(255, 255, 255, 0.03);
            padding: 20px;
            border-radius: 16px;
            border: 1px solid var(--card-border);
            margin-bottom: 16px;
            transition: all 0.2s ease;
        }
        .dimension-card:hover {
            border-color: rgba(139, 92, 246, 0.3);
            background: rgba(255, 255, 255, 0.05);
        }
        .dimension-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 12px;
            flex-wrap: wrap;
        }
        .dimension-key {
            font-size: 26px;
            font-weight: 700;
            color: var(--accent-purple);
            min-width: 40px;
        }
        .dimension-label {
            font-size: 18px;
            font-weight: 600;
            color: var(--text-main);
            flex: 1;
        }
        .dimension-value {
            font-size: 22px;
            font-weight: 700;
            color: var(--text-main);
            min-width: 50px;
            text-align: right;
        }
        .dimension-level {
            font-size: 16px;
            padding: 4px 12px;
            border-radius: 12px;
            background: rgba(255, 255, 255, 0.05);
            color: var(--text-dim);
            font-weight: 600;
        }
        .dimension-bar-container {
            height: 12px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 6px;
            overflow: hidden;
            margin-bottom: 12px;
        }
        .dimension-bar {
            height: 100%;
            border-radius: 6px;
            transition: width 0.5s ease;
        }
        .dimension-interpretation {
            font-size: 17px;
            color: var(--text-main);
            margin-bottom: 8px;
            font-weight: 500;
            line-height: 1.6;
            padding: 12px;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 12px;
            border-left: 3px solid var(--accent-purple);
            font-style: italic;
        }
        .dimension-desc {
            font-size: 14px;
            color: var(--text-dim);
            line-height: 1.5;
        }
        .vibe-roast-section {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid var(--card-border);
            border-radius: 20px;
            padding: 24px;
            margin-bottom: 32px;
            backdrop-filter: var(--glass-blur);
        }
        .roast-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 16px;
            flex-wrap: wrap;
            gap: 12px;
        }
        .roast-title {
            font-size: 20px;
            font-weight: 700;
            color: var(--text-main);
            margin: 0;
        }
        .personality-title {
            font-size: 18px;
            font-weight: 600;
            color: var(--accent-purple);
            padding: 6px 16px;
            background: rgba(139, 92, 246, 0.1);
            border-radius: 20px;
            border: 1px solid var(--accent-purple);
        }
        .vibe-index {
            font-size: 16px;
            color: var(--text-dim);
            font-family: 'JetBrains Mono', monospace;
            padding: 6px 12px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            border: 1px solid var(--card-border);
        }
        .roast-content {
            background: rgba(255, 255, 255, 0.03);
            padding: 20px;
            border-radius: 12px;
            border-left: 4px solid var(--accent-purple);
            margin-bottom: 16px;
        }
        .roast-text {
            font-size: 17px;
            line-height: 1.8;
            color: var(--text-main);
            margin: 0;
            font-style: italic;
        }
        .dimension-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }
        .dimension-tag {
            font-size: 15px;
            padding: 6px 12px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--card-border);
            border-radius: 16px;
            color: var(--text-main);
            font-weight: 500;
        }
        .vibe-traits {
            margin-bottom: 32px;
        }
        .traits-title {
            font-size: 20px;
            font-weight: 600;
            margin-bottom: 16px;
            color: var(--text-main);
        }
        .traits-list {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
        }
        .trait-tag {
            padding: 8px 16px;
            background: rgba(139, 92, 246, 0.1);
            border: 1px solid rgba(139, 92, 246, 0.3);
            border-radius: 20px;
            font-size: 16px;
            font-weight: 500;
            color: var(--text-main);
        }
        .vibe-fingerprint {
            margin-bottom: 32px;
        }
        .fingerprint-title {
            font-size: 20px;
            font-weight: 600;
            margin-bottom: 16px;
            color: var(--text-main);
        }
        .fingerprint-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 16px;
        }
        .fingerprint-item {
            display: flex;
            flex-direction: column;
            gap: 8px;
            padding: 16px;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 12px;
            border: 1px solid var(--card-border);
            text-align: center;
        }
        .fingerprint-label {
            font-size: 15px;
            color: var(--text-dim);
        }
        .fingerprint-value {
            font-size: 20px;
            font-weight: 700;
            color: var(--text-main);
        }
        .vibe-chart-container {
            margin-bottom: 32px;
        }
        .vibe-chart-container .chart-title {
            font-size: 20px;
            font-weight: 600;
            margin-bottom: 20px;
            color: var(--text-main);
        }
        .chart-wrapper {
            position: relative;
            height: 400px;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 12px;
            padding: 20px;
        }
        #vibeRadarChart {
            max-height: 100%;
        }
        .btn {
            background: var(--accent-gradient);
            color: white;
            border: none;
            padding: 12px 32px;
            border-radius: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: opacity 0.2s;
            font-size: 18px;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }
        .btn:active {
            transform: scale(0.98);
        }
        .hidden {
            display: none !important;
        }
        @keyframes fadeInDown {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        @media (max-width: 768px) {
            .stats-grid {
                grid-template-columns: 1fr 1fr;
            }
            .wordcloud-section {
                grid-template-columns: 1fr;
            }
            .chat-list-header {
                flex-direction: column;
                align-items: stretch;
            }
            .search-input {
                width: 100%;
            }
            .pagination-container {
                flex-direction: column;
                align-items: stretch;
            }
        }
        @media (max-width: 480px) {
            .stats-grid {
                grid-template-columns: 1fr;
            }
        }
        /* Êï∞Â≠óË∑≥Âä®Âä®Áîª */
        @keyframes numberPulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.15); color: var(--accent-purple); text-shadow: 0 0 10px var(--accent-purple); }
            100% { transform: scale(1); }
        }
        @keyframes numberFlash {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.3; }
        }
        .stat-value.animate-pulse {
            animation: numberPulse 0.6s ease-in-out;
        }
        .stat-value.animate-flash {
            animation: numberFlash 0.4s ease-in-out;
        }
        .stat-value.updating {
            position: relative;
        }
        .stat-value.updating::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, transparent, rgba(139, 92, 246, 0.3), transparent);
            animation: shimmer 1.5s infinite;
        }
        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }
    </style>
  <script type="module" crossorigin src="/Cursor-Clinical-Analysis/assets/main-B7yZxiZe.js"></script>
</head>
<body class="bg-[#050505]">
    <div id="root"></div>
    <!-- ÂÆåÊï¥Êä•ÂëäÂÆπÂô®ÔºàÈöêËóèÔºåÁ≠âÂæÖÊ∏≤ÊüìÔºâ -->
    <div id="fullReportContainer" style="display: none;"></div>


    <script type="text/babel">
        const { useState, useEffect, useRef } = React;
        
        // Ê®°Êãü Lucide ÂõæÊ†áÁªÑ‰ª∂
        const Icon = ({ name, size = 24, className = "" }) => {
            const iconRef = useRef(null);
            useEffect(() => {
                if (iconRef.current) {
                    lucide.createIcons();
                }
            }, [name]);
            return <i data-lucide={name} className={className} style={{width: size, height: size}}></i>;
        };

        // ÁªüËÆ°Âç°ÁâáÂ≠êÁªÑ‰ª∂
        function StatBox({ label, value, sub, color }) {
            return (
                <div className="bg-zinc-950/50 border border-zinc-800 p-4 rounded-2xl min-w-[120px] md:min-w-[140px]">
                    <div className="text-zinc-600 text-[10px] uppercase tracking-tighter mb-1 font-bold">{label}</div>
                    <div className={`text-2xl font-black ${color}`}>
                        {value}
                        <span className="text-xs ml-1 opacity-50 font-normal text-zinc-400">{sub}</span>
                    </div>
                </div>
            );
        }

        function App() {
            const [step, setStep] = useState('upload');
            const [logs, setLogs] = useState([]);
            const [analysisData, setAnalysisData] = useState(null);
            const [error, setError] = useState(null);
            const [isInitialized, setIsInitialized] = useState(false);
            const [totalTestUsers, setTotalTestUsers] = useState(0); // ‰ªé API Ëé∑ÂèñÔºå‰∏ç‰ΩøÁî®Á°¨ÁºñÁ†Å
            // ÂÆûÊó∂ÁªüËÆ°Êï∞ÊçÆÔºàÂÖ®ÈÉ®‰ªé Cloudflare API Ëé∑ÂèñÔºâ
            const [totalUsers, setTotalUsers] = useState(0); // ÂèóËôê‰∫∫Êï∞
            const [techRank, setTechRank] = useState(0); // ÊäÄÊúØÊéíÂêç
            const [unlockedCount, setUnlockedCount] = useState(0); // ‰∫∫Ê†ºËß£ÈîÅÊï∞
            const folderInputRef = useRef(null);
            const fileInputRef = useRef(null);
            // Áî®‰∫é‰øùÂ≠òÂä®ÁîªÊâÄÈúÄÁöÑÊóßÂÄºÂíåÊñ∞ÂÄº
            const animationDataRef = useRef(null);

            // Ê†ºÂºèÂåñÊï∞Â≠óÊòæÁ§∫
            const formatNumber = (num) => {
                if (num >= 1000000) return (num / 1000000).toFixed(1) + 'M';
                if (num >= 10000) return (num / 10000).toFixed(1) + '‰∏á';
                if (num >= 1000) return (num / 1000).toFixed(1) + 'K';
                return num.toString();
            };

            // Êï∞Â≠óË∑≥Âä®Âä®ÁîªÊïàÊûúÂáΩÊï∞
            const animateNumberUpdate = (elementId, oldValue, newValue, formatFn) => {
                const element = document.getElementById(elementId);
                if (!element) {
                    console.warn(`[Âä®Áîª] Êú™ÊâæÂà∞ÂÖÉÁ¥†: ${elementId}`);
                    return;
                }

                // Ê∑ªÂä†Ë∑≥Âä®Âä®ÁîªÁ±ª
                element.classList.add('animate-pulse');
                
                // ËÆ°ÁÆóÂ∑ÆÂÄº
                const diff = newValue - oldValue;
                if (diff === 0) {
                    // Ê≤°ÊúâÂèòÂåñÔºåÁõ¥Êé•ÁßªÈô§Âä®ÁîªÁ±ª
                    setTimeout(() => {
                        element.classList.remove('animate-pulse');
                    }, 100);
                    return;
                }
                
                const duration = 800; // Âä®ÁîªÊåÅÁª≠Êó∂Èó¥ÔºàÊØ´ÁßíÔºâ
                const steps = 30; // Âä®ÁîªÊ≠•Êï∞
                const stepValue = diff / steps;
                const stepDuration = duration / steps;
                let currentStep = 0;
                const startTime = Date.now();
                
                const animate = () => {
                    const elapsed = Date.now() - startTime;
                    const progress = Math.min(elapsed / duration, 1);
                    
                    // ‰ΩøÁî®ÁºìÂä®ÂáΩÊï∞Ôºàease-outÔºâ
                    const easeOut = 1 - Math.pow(1 - progress, 3);
                    const currentValue = Math.round(oldValue + diff * easeOut);
                    
                    element.textContent = formatFn(currentValue);
                    
                    if (progress < 1) {
                        requestAnimationFrame(animate);
                    } else {
                        // Á°Æ‰øùÊúÄÁªàÂÄºÂáÜÁ°Æ
                        element.textContent = formatFn(newValue);
                        // ÁßªÈô§Âä®ÁîªÁ±ª
                        setTimeout(() => {
                            element.classList.remove('animate-pulse');
                        }, 100);
                        console.log(`[Âä®Áîª] ${elementId} Âä®ÁîªÂÆåÊàê: ${oldValue} -> ${newValue}`);
                    }
                };
                
                animate();
            };

            // È°µÈù¢Âä†ËΩΩÊó∂‰ªé API Ëé∑Âèñ"ÂÖ®ÁΩëÂèóËôê‰∫∫Êï∞"
            useEffect(() => {
                const fetchTotalUsers = async () => {
                    try {
                        const apiUrl = 'https://cursor-clinical-analysis.psterman.workers.dev/';
                        console.log('[React] ÂèëËµ∑ GET ËØ∑Ê±ÇËé∑ÂèñÂÖ®ÁΩëÂèóËôê‰∫∫Êï∞...');
                        
                        const response = await fetch(apiUrl, {
                            method: 'GET',
                            headers: {
                                'Content-Type': 'application/json',
                            },
                            mode: 'cors',
                            cache: 'no-cache',
                        });
                        
                        if (response.ok) {
                            const data = await response.json();
                            const value = data.value || data.totalUsers || data.total || data.count || 0;
                            
                            console.log('[React] API ËøîÂõûÊï∞ÊçÆ:', data, 'Ëß£ÊûêÂêéÁöÑÂÄº:', value);
                            
                            if (value > 0) {
                                // ÂèóËôê‰∫∫Êï∞Ôºö‰ΩøÁî® API ËøîÂõûÁöÑÂÆûÊó∂ËÆøÈóÆÊÄªÊï∞
                                setTotalUsers(value);
                                setTotalTestUsers(value);
                                
                                // ÊäÄÊúØÊéíÂêçÔºöÊ†πÊçÆÊÄª‰∫∫Êï∞ÊåâÊØî‰æãÂä®ÊÄÅËÆ°ÁÆó (value * 0.6)
                                const calculatedRank = Math.floor(value * 0.6);
                                setTechRank(calculatedRank);
                                
                                // ‰∫∫Ê†ºÂ∫ìËß£ÈîÅÔºöÊ†πÊçÆÊÄª‰∫∫Êï∞ÊåâÊØî‰æãÂä®ÊÄÅËÆ°ÁÆó (value / 1000)%ÔºåÊúÄÂ§ß100%
                                const calculatedUnlocked = Math.min(100, parseFloat((value / 1000).toFixed(1)));
                                setUnlockedCount(calculatedUnlocked);
                                
                                // ‰øùÂ≠òÂà∞Êú¨Âú∞Â≠òÂÇ®‰Ωú‰∏∫ fallback
                                localStorage.setItem('totalTestUsers', value.toString());
                                console.log('[React] Êï∞ÊçÆËé∑ÂèñÊàêÂäü:', {
                                    totalUsers: value,
                                    techRank: calculatedRank,
                                    unlockedCount: calculatedUnlocked
                                });
                            } else {
                                throw new Error('API ËøîÂõûÁöÑÂÄº‰∏∫ 0 ÊàñÊó†Êïà');
                            }
                        } else {
                            throw new Error(`API ËØ∑Ê±ÇÂ§±Ë¥•ÔºåÁä∂ÊÄÅÁ†Å: ${response.status}`);
                        }
                    } catch (error) {
                        console.warn('[React] API ËØ∑Ê±ÇÂ§±Ë¥•Ôºå‰ΩøÁî® localStorage fallback:', error.message);
                        // ‰ΩøÁî® localStorage ‰Ωú‰∏∫ fallback
                        const cached = parseInt(localStorage.getItem('totalTestUsers') || '0');
                        if (cached > 0) {
                            setTotalUsers(cached);
                            setTotalTestUsers(cached);
                            // Ê†πÊçÆÁºìÂ≠òÂÄºÂä®ÊÄÅËÆ°ÁÆó
                            setTechRank(Math.floor(cached * 0.6));
                            setUnlockedCount(Math.min(100, parseFloat((cached / 1000).toFixed(1))));
                            console.log('[React] ‰ΩøÁî®ÁºìÂ≠òÊï∞ÊçÆ:', {
                                totalUsers: cached,
                                techRank: Math.floor(cached * 0.6),
                                unlockedCount: Math.min(100, parseFloat((cached / 1000).toFixed(1)))
                            });
                        } else {
                            // Â¶ÇÊûúÁºìÂ≠ò‰πüÊ≤°ÊúâÔºå‰ΩøÁî®ÈªòËÆ§ÂÄº 0
                            setTotalUsers(0);
                            setTechRank(0);
                            setUnlockedCount(0);
                        }
                    }
                };
                
                fetchTotalUsers();
            }, []);

            // ÂàùÂßãÂåñËß£ÊûêÂô®
            useEffect(() => {
                const init = async () => {
                    try {
                        console.log('Ê£ÄÊü• analysisModule:', window.analysisModule);
                        console.log('Ê£ÄÊü• analysisModuleLoading:', window.analysisModuleLoading);
                        console.log('Ê£ÄÊü• analysisModuleError:', window.analysisModuleError);
                        
                        // Á≠âÂæÖÊ®°ÂùóÂä†ËΩΩÔºàÊúÄÂ§öÁ≠âÂæÖ 5 ÁßíÔºâ
                        let retries = 0;
                        const maxRetries = 50; // 50 * 100ms = 5Áßí
                        
                        while (!window.analysisModule && retries < maxRetries) {
                            // Â¶ÇÊûúÊ®°ÂùóÂä†ËΩΩÂ§±Ë¥•ÔºåÁ´ãÂç≥ÈÄÄÂá∫
                            if (window.analysisModuleError) {
                                console.error('Ê®°ÂùóÂä†ËΩΩÂ§±Ë¥•:', window.analysisModuleError);
                                setError('Ê®°ÂùóÂä†ËΩΩÂ§±Ë¥•: ' + (window.analysisModuleError.message || 'Êú™Áü•ÈîôËØØ') + 'ÔºåËØ∑Âà∑Êñ∞È°µÈù¢ÈáçËØï');
                                return;
                            }
                            
                            // Â¶ÇÊûúÊ®°ÂùóËøòÂú®Âä†ËΩΩ‰∏≠ÔºåÁªßÁª≠Á≠âÂæÖ
                            if (window.analysisModuleLoading !== false) {
                                await new Promise(resolve => setTimeout(resolve, 100));
                                retries++;
                            } else {
                                // Âä†ËΩΩÂÆåÊàê‰ΩÜÊ®°Âùó‰∏çÂ≠òÂú®ÔºåËØ¥ÊòéÂä†ËΩΩÂ§±Ë¥•
                                break;
                            }
                        }
                        
                        if (window.analysisModule) {
                            console.log('‚úÖ Ê®°ÂùóÂ∑≤Âä†ËΩΩÔºåÂàùÂßãÂåñËß£ÊûêÂô®...');
                            await window.analysisModule.initializeParser();
                            setIsInitialized(true);
                            setLogs(prev => [...prev, '> Ëß£ÊûêÂô®ÂàùÂßãÂåñÂÆåÊàê']);
                        } else {
                            console.error('‚ùå Ê®°ÂùóÂä†ËΩΩË∂ÖÊó∂ÊàñÂ§±Ë¥•');
                            const errorMsg = window.analysisModuleError 
                                ? 'Ê®°ÂùóÂä†ËΩΩÂ§±Ë¥•: ' + window.analysisModuleError.message
                                : 'Ê®°ÂùóÂä†ËΩΩË∂ÖÊó∂ÔºåËØ∑Âà∑Êñ∞È°µÈù¢ÈáçËØï';
                            setError(errorMsg);
                        }
                    } catch (err) {
                        console.error('ÂàùÂßãÂåñÂ§±Ë¥•:', err);
                        setError('ÂàùÂßãÂåñÂ§±Ë¥•: ' + err.message);
                    }
                };
                
                // ÁõëÂê¨Ê®°ÂùóÂä†ËΩΩÂ§±Ë¥•‰∫ã‰ª∂
                const handleLoadFailed = (event) => {
                    console.error('Êî∂Âà∞Ê®°ÂùóÂä†ËΩΩÂ§±Ë¥•‰∫ã‰ª∂:', event.detail);
                    setError('Ê®°ÂùóÂä†ËΩΩÂ§±Ë¥•: ' + (event.detail.error?.message || 'Êú™Áü•ÈîôËØØ') + 'ÔºåËØ∑Âà∑Êñ∞È°µÈù¢ÈáçËØï');
                };
                window.addEventListener('analysisModuleLoadFailed', handleLoadFailed);
                
                init();
                
                // Ê∏ÖÁêÜ‰∫ã‰ª∂ÁõëÂê¨Âô®
                return () => {
                    window.removeEventListener('analysisModuleLoadFailed', handleLoadFailed);
                };
            }, []);

            // Â§ÑÁêÜÊñá‰ª∂ÈÄâÊã©
            const handleFileSelect = (type) => {
                console.log('handleFileSelect Ë¢´Ë∞ÉÁî®', type);
                console.log('folderInputRef.current:', folderInputRef.current);
                console.log('fileInputRef.current:', fileInputRef.current);
                
                if (type === 'folder') {
                    if (folderInputRef.current) {
                        console.log('Ëß¶ÂèëÊñá‰ª∂Â§πÈÄâÊã©');
                        folderInputRef.current.click();
                    } else {
                        console.error('folderInputRef.current ‰∏∫ null');
                    }
                } else {
                    if (fileInputRef.current) {
                        console.log('Ëß¶ÂèëÊñá‰ª∂ÈÄâÊã©');
                        fileInputRef.current.click();
                    } else {
                        console.error('fileInputRef.current ‰∏∫ null');
                    }
                }
            };

            // Â§ÑÁêÜÊñá‰ª∂‰∏ä‰º†
            const handleFileUpload = async (event, type) => {
                console.log('handleFileUpload Ë¢´Ë∞ÉÁî®', { type, files: event.target.files });
                
                const files = Array.from(event.target.files || []);
                console.log('Êñá‰ª∂ÂàóË°®:', files.map(f => ({ name: f.name, size: f.size })));
                
                if (files.length === 0) {
                    console.warn('Ê≤°ÊúâÈÄâÊã©Êñá‰ª∂');
                    return;
                }

                setError(null);
                setStep('analyzing');
                setLogs(['> ÂºÄÂßãËß£ÊûêÊï∞ÊçÆÂ∫ìÊñá‰ª∂...']);

                try {
                    // Ê£ÄÊü•Ê®°ÂùóÊòØÂê¶Âä†ËΩΩÔºåÂ¶ÇÊûúÊú™Âä†ËΩΩÂàôÁ≠âÂæÖ‰∏ÄÊÆµÊó∂Èó¥
                    if (!window.analysisModule) {
                        console.warn('Ê®°ÂùóÊú™Âä†ËΩΩÔºåÁ≠âÂæÖÂä†ËΩΩ...');
                        setLogs(prev => [...prev, '> Á≠âÂæÖÂàÜÊûêÊ®°ÂùóÂä†ËΩΩ...']);
                        
                        // Á≠âÂæÖÊ®°ÂùóÂä†ËΩΩÔºàÊúÄÂ§öÁ≠âÂæÖ 3 ÁßíÔºâ
                        let retries = 0;
                        const maxRetries = 30; // 30 * 100ms = 3Áßí
                        
                        while (!window.analysisModule && retries < maxRetries) {
                            // Â¶ÇÊûúÊ®°ÂùóÂä†ËΩΩÂ§±Ë¥•ÔºåÁ´ãÂç≥ÈÄÄÂá∫
                            if (window.analysisModuleError) {
                                throw new Error('ÂàÜÊûêÊ®°ÂùóÂä†ËΩΩÂ§±Ë¥•: ' + (window.analysisModuleError.message || 'Êú™Áü•ÈîôËØØ') + 'ÔºåËØ∑Âà∑Êñ∞È°µÈù¢ÈáçËØï');
                            }
                            
                            // Â¶ÇÊûúÊ®°ÂùóËøòÂú®Âä†ËΩΩ‰∏≠ÔºåÁªßÁª≠Á≠âÂæÖ
                            if (window.analysisModuleLoading !== false) {
                                await new Promise(resolve => setTimeout(resolve, 100));
                                retries++;
                            } else {
                                // Âä†ËΩΩÂÆåÊàê‰ΩÜÊ®°Âùó‰∏çÂ≠òÂú®ÔºåËØ¥ÊòéÂä†ËΩΩÂ§±Ë¥•
                                break;
                            }
                        }
                        
                        if (!window.analysisModule) {
                            const errorMsg = window.analysisModuleError 
                                ? 'ÂàÜÊûêÊ®°ÂùóÂä†ËΩΩÂ§±Ë¥•: ' + window.analysisModuleError.message
                                : 'ÂàÜÊûêÊ®°ÂùóÂä†ËΩΩË∂ÖÊó∂';
                            throw new Error(errorMsg + 'ÔºåËØ∑Âà∑Êñ∞È°µÈù¢ÈáçËØï');
                        }
                        
                        console.log('‚úÖ Ê®°ÂùóÂ∑≤Âä†ËΩΩÔºåÁªßÁª≠Â§ÑÁêÜÊñá‰ª∂');
                        setLogs(prev => [...prev, '> ÂàÜÊûêÊ®°ÂùóÂ∑≤Â∞±Áª™']);
                    }

                    if (!isInitialized) {
                        setLogs(prev => [...prev, '> ÂàùÂßãÂåñËß£ÊûêÂô®...']);
                        await window.analysisModule.initializeParser();
                        setIsInitialized(true);
                    }

                    // Ë∞ÉÁî® main.js ÁöÑÂ§ÑÁêÜÂáΩÊï∞
                    console.log('Ë∞ÉÁî® processFiles...');
                    await window.analysisModule.processFiles(files, type, {
                        onLog: (log) => {
                            console.log('onLog:', log);
                            setLogs(prev => [...prev, log]);
                        },
                        onProgress: (current, total, fileName) => {
                            console.log('onProgress:', { current, total, fileName });
                            setLogs(prev => [...prev, `> Â§ÑÁêÜËøõÂ∫¶: ${current}/${total} - ${fileName}`]);
                        },
                        onComplete: (data) => {
                            console.log('onComplete:', data);
                            setAnalysisData(data);
                            setLogs(prev => [...prev, '> ÂàÜÊûêÂÆåÊàêÔºÅ']);
                            setTimeout(() => {
                                setStep('preview');
                            }, 500);
                        },
                        onError: (err) => {
                            console.error('onError:', err);
                            setError(err.message || 'Â§ÑÁêÜÂ§±Ë¥•');
                            setStep('upload');
                        }
                    });
                } catch (err) {
                    console.error('Â§ÑÁêÜÂ§±Ë¥•:', err);
                    setError(err.message || 'Â§ÑÁêÜÂ§±Ë¥•');
                    setStep('upload');
                }
            };


            // ËÆ°ÁÆóÊéíÂêçÔºàÂü∫‰∫é"ËØ∑"ÁöÑÊ¨°Êï∞ÔºåÁÆÄÂåñÁâàÔºâ
            // TODO: Áî®Êà∑Á®çÂêé‰ºö‰øÆÊîπÊ≠§ÂáΩÊï∞ÁöÑÂèÇÊï∞
            const calculateRank = (qingCount) => {
                // ÁÆÄÂåñËÆ°ÁÆóÔºöÂÅáËÆæÂπ≥ÂùáÁî®Êà∑ËØ¥"ËØ∑"50Ê¨°ÔºåË∂ÖËøáË∂äÂ§öÊéíÂêçË∂äÈ´ò
                const base = 50;
                const ratio = qingCount / base;
                return Math.min(99, Math.max(1, Math.round(ratio * 50)));
            };

            // ËÆ°ÁÆóÂØπËØùÂ§©Êï∞Ôºà‰ªéÊúÄÊó©Êñá‰ª∂Êó∂Èó¥ËÆ°ÁÆóÔºâ
            const calculateUsageDays = (stats) => {
                if (!stats || !stats.earliestFileTime) {
                    return 0;
                }
                const now = Date.now();
                const earliest = stats.earliestFileTime;
                const diffMs = now - earliest;
                return Math.floor(diffMs / (1000 * 60 * 60 * 24));
            };

            // ËøõÂÖ•ÂÆåÊï¥Êä•Âëä
            const showFullReport = async () => {
                console.log('showFullReport Ë¢´Ë∞ÉÁî®ÔºåÂèëËµ∑ POST ËØ∑Ê±ÇÂ¢ûÂä†ËÆ°Êï∞ÂÄº...');
                
                // ‰øùÂ≠òÂΩìÂâçÂÄºÔºåÁî®‰∫éÂä®ÁîªÊïàÊûú
                const oldTotalUsers = totalUsers;
                const oldTechRank = techRank;
                const oldUnlockedCount = unlockedCount;
                
                // Âú®Áî®Êà∑ÁÇπÂáªÁîüÊàêÊä•ÂëäÊó∂ÔºåÂèëËµ∑ POST ËØ∑Ê±ÇÂ¢ûÂä†ËÆ°Êï∞ÂÄº
                try {
                    const apiUrl = 'https://cursor-clinical-analysis.psterman.workers.dev/';
                    const response = await fetch(apiUrl, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        mode: 'cors',
                        body: JSON.stringify({
                            action: 'increment',
                            timestamp: Date.now(),
                        }),
                    });
                    
                    if (response.ok) {
                        const data = await response.json();
                        const newCount = data.value || data.totalUsers || data.total || data.count || 0;
                        
                        if (newCount > 0) {
                            // Êõ¥Êñ∞ÊâÄÊúâÁõ∏ÂÖ≥Áä∂ÊÄÅ
                            setTotalUsers(newCount);
                            setTotalTestUsers(newCount);
                            
                            // Ê†πÊçÆÊñ∞ÁöÑÊÄª‰∫∫Êï∞Âä®ÊÄÅËÆ°ÁÆóÊäÄÊúØÊéíÂêçÂíå‰∫∫Ê†ºÂ∫ìËß£ÈîÅ
                            const calculatedRank = Math.floor(newCount * 0.6);
                            setTechRank(calculatedRank);
                            
                            const calculatedUnlocked = Math.min(100, parseFloat((newCount / 1000).toFixed(1)));
                            setUnlockedCount(calculatedUnlocked);
                            
                            // ‰øùÂ≠òÂà∞Êú¨Âú∞Â≠òÂÇ®‰Ωú‰∏∫ fallback
                            localStorage.setItem('totalTestUsers', newCount.toString());
                            
                            console.log('[React] POST ËØ∑Ê±ÇÊàêÂäüÔºåËÆ°Êï∞ÂÄºÂ∑≤Êõ¥Êñ∞:', {
                                totalUsers: newCount,
                                techRank: calculatedRank,
                                unlockedCount: calculatedUnlocked
                            });
                            
                            // ‰øùÂ≠òÂä®ÁîªÊï∞ÊçÆÂà∞ refÔºåÁ≠âÂæÖ Dashboard Ê∏≤ÊüìÂÆåÊàêÂêéËß¶Âèë
                            animationDataRef.current = {
                                totalUsers: { old: oldTotalUsers, new: newCount },
                                techRank: { old: oldTechRank, new: calculatedRank },
                                unlockedCount: { old: oldUnlockedCount, new: calculatedUnlocked }
                            };
                        } else {
                            console.warn('[React] POST ËØ∑Ê±ÇËøîÂõûÁöÑÂÄº‰∏∫ 0 ÊàñÊó†Êïà');
                        }
                    } else {
                        console.warn('[React] POST ËØ∑Ê±ÇÂ§±Ë¥•ÔºåÁä∂ÊÄÅÁ†Å:', response.status);
                        // POST Â§±Ë¥•Êó∂ÔºåÂ∞ùËØï‰ªé localStorage Ëé∑ÂèñÊúÄÊñ∞ÂÄº
                        const cached = parseInt(localStorage.getItem('totalTestUsers') || '0');
                        if (cached > 0) {
                            setTotalUsers(cached);
                            setTotalTestUsers(cached);
                            setTechRank(Math.floor(cached * 0.6));
                            setUnlockedCount(Math.min(100, parseFloat((cached / 1000).toFixed(1))));
                        }
                    }
                } catch (error) {
                    console.warn('[React] POST ËØ∑Ê±ÇÂºÇÂ∏∏Ôºå‰ΩøÁî® localStorage fallback:', error.message);
                    // ËØ∑Ê±ÇÂºÇÂ∏∏Êó∂Ôºå‰ΩøÁî® localStorage ‰Ωú‰∏∫ fallback
                    const cached = parseInt(localStorage.getItem('totalTestUsers') || '0');
                    if (cached > 0) {
                        setTotalUsers(cached);
                        setTotalTestUsers(cached);
                        setTechRank(Math.floor(cached * 0.6));
                        setUnlockedCount(Math.min(100, parseFloat((cached / 1000).toFixed(1))));
                    }
                }
                
                setStep('fullReport');
                // Âª∂ËøüÊ∏≤ÊüìÔºåÁ°Æ‰øù DOM Â∑≤Êõ¥Êñ∞
                setTimeout(() => {
                    const container = document.getElementById('fullReportContainer');
                    if (container && window.analysisModule) {
                        console.log('ÂàõÂª∫ Dashboard DOM...');
                        // ÂàõÂª∫ Dashboard DOM ÁªìÊûÑÔºà‰ªé index.html Â§çÂà∂Ôºâ
                        container.innerHTML = `
                            <div class="full-report-container" style="max-width: 1100px; margin: 0 auto; padding: 20px; padding-bottom: 80px;">
                                <header style="text-align: center; padding: 60px 20px;">
                                    <div class="logo-box" style="display: inline-block; padding: 8px 16px; background: rgba(255, 255, 255, 0.05); border: 1px solid var(--card-border); border-radius: 20px; margin-bottom: 20px; font-size: 14px; color: var(--accent-blue); backdrop-filter: var(--glass-blur);">Clinical Analysis v2.0</div>
                                    <h1 style="font-size: clamp(2rem, 5vw, 3.5rem); font-weight: 800; letter-spacing: -0.05em; background: linear-gradient(to bottom, #fff 30%, #a1a1a1 100%); -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent; margin-bottom: 15px;">Cursor Ëø∑ÊÉëË°å‰∏∫Êä•Âëä</h1>
                                    <p class="subtitle" style="color: var(--text-dim); font-size: 1.1rem;">Âü∫‰∫éÊú¨Âú∞ SQLite Êï∞ÊçÆÂ∫ìÁöÑÊ∑±Â∫¶ÂèóËôêÂàÜÊûê</p>
                                </header>
                                
                                <div id="dashboardSection">
                                    <!-- ÂÆûÊó∂ÁªüËÆ°Âå∫Âüü -->
                                    <div class="realtime-stats-section" style="background: var(--card-bg); border: 1px solid var(--card-border); border-radius: 24px; padding: 24px; margin-bottom: 40px; backdrop-filter: var(--glass-blur);">
                                        <h3 class="chart-title" style="margin-bottom: 20px; text-align: center;">üìä ÂÆûÊó∂ÁªüËÆ°</h3>
                                        <div class="stats-grid" style="grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 16px;">
                                            <div class="stat-card" style="text-align: center;">
                                                <p class="stat-label">ÂÖ®ÁΩëÂèóËôê‰∫∫Êï∞</p>
                                                <p class="stat-value" id="totalTestUsers" style="color: var(--accent-blue);">Âä†ËΩΩ‰∏≠...</p>
                                                <p class="stat-comparison">‰∫∫</p>
                                            </div>
                                            <div class="stat-card" style="text-align: center;">
                                                <p class="stat-label">ÊäÄÊúØÊéíÂêç</p>
                                                <p class="stat-value" id="techRank" style="color: var(--accent-purple);">Âä†ËΩΩ‰∏≠...</p>
                                                <p class="stat-comparison">Âêç</p>
                                            </div>
                                            <div class="stat-card" style="text-align: center;">
                                                <p class="stat-label">‰∫∫Ê†ºÂ∫ìËß£ÈîÅ</p>
                                                <p class="stat-value" id="personalityUnlock" style="color: #10b981;">Âä†ËΩΩ‰∏≠...</p>
                                                <p class="stat-comparison">243 Áßç‰∫∫Ê†º</p>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Áª¥Â∫¶ÂæóÂàÜÊéíË°åÊ¶ú -->
                                    <div class="dimension-ranking-section" style="background: var(--card-bg); border: 1px solid var(--card-border); border-radius: 24px; padding: 24px; margin-bottom: 40px; backdrop-filter: var(--glass-blur);">
                                        <h3 class="chart-title" style="margin-bottom: 20px; text-align: center;">üèÜ ÂÖ≠Â§ßÁ°¨Ê†∏Áª¥Â∫¶ÂæóÂàÜÊéíË°åÊ¶ú</h3>
                                        <div id="dimensionRankingList" class="prompts-list"></div>
                                    </div>

                                    <div class="stats-grid" id="exportArea">
                                        <div class="stat-card">
                                            <p class="stat-label">Cursor‰∏äÂ≤óÂ§©Êï∞</p>
                                            <p class="stat-value" id="totalConversations">0</p>
                                            <p class="stat-comparison">Â§©</p>
                                        </div>
                                        <div class="stat-card">
                                            <p class="stat-label">Ë∞ÉÊàè AI Ê¨°Êï∞</p>
                                            <p class="stat-value" id="userMessages">0</p>
                                        </div>
                                    </div>
                                    
                                    <div class="stats-grid">
                                        <div class="stat-card">
                                            <p class="stat-label">ËµõÂçöÁ£ïÂ§¥Ê¨°Êï∞</p>
                                            <p class="stat-value" id="qingCount">0</p>
                                            <p class="stat-comparison">Ê¨°</p>
                                        </div>
                                        <div class="stat-card">
                                            <p class="stat-label">Áî≤ÊñπÁà∏Áà∏‰∏äË∫´</p>
                                            <p class="stat-value" id="buCount">0</p>
                                            <p class="stat-comparison">Ê¨°</p>
                                        </div>
                                    </div>
                                    
                                    <div class="stats-grid">
                                        <div class="stat-card">
                                            <p class="stat-label">Â∫üËØùÊñáÂ≠¶ËæìÂá∫</p>
                                            <p class="stat-value" id="totalUserChars">0</p>
                                            <p class="stat-comparison">Â≠óÁ¨¶</p>
                                        </div>
                                        <div class="stat-card">
                                            <p class="stat-label">Âπ≥ÂùáÂêπÊ∞¥ÈïøÂ∫¶</p>
                                            <p class="stat-value" id="avgUserMessageLength">0</p>
                                            <p class="stat-comparison">Â≠óÁ¨¶</p>
                                        </div>
                                        <div class="stat-card hidden" id="questionCard">
                                            <p class="stat-label">Èªë‰∫∫ÈóÆÂè∑Ê¨°Êï∞</p>
                                            <p class="stat-value" id="questionMessageCount">0</p>
                                            <p class="stat-comparison">Êù°</p>
                                        </div>
                                    </div>
                                    
                                    <div class="wordcloud-section">
                                        <div class="chart-card">
                                            <h3 class="chart-title">‚òÅÔ∏è AIÂäüÂæ∑Á∞ø</h3>
                                            <div class="wordcloud-container">
                                                <canvas id="chineseWordCloud"></canvas>
                                            </div>
                                        </div>
                                        <div class="chart-card">
                                            <h3 class="chart-title">üî§ ‰Ω†ÁöÑÁ°ÖË∞∑ÈªëËØùÂè£Â§¥Á¶Ö</h3>
                                            <div class="wordcloud-container">
                                                <canvas id="englishWordCloud"></canvas>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="chart-card" style="margin-top: 40px;">
                                        <h3 class="chart-title">üó£Ô∏è vibe codingÈªëËØùÊ¶ú</h3>
                                        <div class="prompts-list" id="topChineseWordsList"></div>
                                    </div>
                                    
                                    <div class="chart-card" id="techStackSection" style="display: none; margin-top: 40px;">
                                        <h3 class="chart-title">üõ†Ô∏è Áî®Êà∑ÊäÄÊúØÊ†à Top 10</h3>
                                        <div class="prompts-list" id="techStackList"></div>
                                    </div>
                                    
                                    <div class="vibe-codinger-section chart-card" id="vibeCodingerSection" style="margin-top: 40px;"></div>
                                    
                                    <div class="chat-list-section" style="margin-top: 40px;">
                                        <div class="chat-list-header">
                                            <h3 class="chat-list-title">ÂØπËØùËÆ∞ÂΩï</h3>
                                            <div class="chat-list-controls">
                                                <input type="text" id="searchInput" class="search-input" placeholder="ÊêúÁ¥¢ÂØπËØù...">
                                            </div>
                                        </div>
                                        <div class="chat-list" id="chatList"></div>
                                        <div class="pagination-container" id="paginationContainer" style="display: none;">
                                            <div class="pagination-info">
                                                <span id="paginationInfo">Á¨¨ 1 È°µÔºåÂÖ± 1 È°µ</span>
                                            </div>
                                            <div class="pagination-controls">
                                                <button id="paginationPrev" class="pagination-btn" disabled>‰∏ä‰∏ÄÈ°µ</button>
                                                <div class="pagination-pages" id="paginationPages"></div>
                                                <button id="paginationNext" class="pagination-btn">‰∏ã‰∏ÄÈ°µ</button>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div style="text-align: center; margin-top: 50px;">
                                        <button class="btn" id="exportBtn" style="background: rgba(255,255,255,0.1); border: 1px solid var(--card-border);">
                                            <span>ÁîüÊàêÂèóËôêËØÅÊçÆÊµ∑Êä•</span>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        `;
                        // ÊòæÁ§∫ÂÆπÂô®
                        container.style.display = 'block';
                        
                        // Á≠âÂæÖ DOM ÂÆåÂÖ®Ê∏≤ÊüìÂêéÂÜçË∞ÉÁî®Ê∏≤ÊüìÂáΩÊï∞
                        setTimeout(() => {
                            console.log('ÂºÄÂßãÊ∏≤Êüì Dashboard...');
                            // ÊòæÁ§∫ Dashboard
                            const dashboardSection = container.querySelector('#dashboardSection');
                            if (dashboardSection) {
                                dashboardSection.classList.remove('hidden');
                                dashboardSection.style.display = 'block';
                            }
                            
                            // Á°Æ‰øùÊï∞ÊçÆÂ∑≤ÂáÜÂ§áÂ•Ω
                            const stats = window.analysisModule.getGlobalStats();
                            const vibeResult = window.analysisModule.getVibeResult();
                            console.log('Êï∞ÊçÆÁä∂ÊÄÅ:', {
                                hasStats: !!stats,
                                hasVibeResult: !!vibeResult
                            });
                            
                            // Ê∏≤ÊüìÂÆåÊï¥ Dashboard
                            try {
                                window.analysisModule.renderFullDashboard();
                                console.log('Dashboard Ê∏≤ÊüìÂÆåÊàê');
                                
                                // Á´ãÂç≥‰ΩøÁî®ÂΩìÂâçÁä∂ÊÄÅÂÄºÊõ¥Êñ∞ÊòæÁ§∫Ôºà‰ΩøÁî® formatNumberÔºâ
                                const formatNumberLocal = (num) => {
                                    if (num >= 1000000) return (num / 1000000).toFixed(1) + 'M';
                                    if (num >= 10000) return (num / 10000).toFixed(1) + '‰∏á';
                                    if (num >= 1000) return (num / 1000).toFixed(1) + 'K';
                                    return num.toString();
                                };
                                
                                const totalUsersEl = document.getElementById('totalTestUsers');
                                const techRankEl = document.getElementById('techRank');
                                const personalityUnlockEl = document.getElementById('personalityUnlock');
                                
                                if (totalUsersEl && totalUsers > 0) {
                                    totalUsersEl.textContent = formatNumberLocal(totalUsers);
                                }
                                if (techRankEl && techRank > 0) {
                                    techRankEl.textContent = formatNumberLocal(techRank);
                                }
                                if (personalityUnlockEl && unlockedCount > 0) {
                                    personalityUnlockEl.textContent = unlockedCount.toFixed(1) + '%';
                                }
                                
                                // Ê£ÄÊü•ÊòØÂê¶ÊúâÂæÖÊâßË°åÁöÑÂä®ÁîªÊï∞ÊçÆÔºàÊù•Ëá™ POST ËØ∑Ê±ÇÔºâ
                                if (animationDataRef.current) {
                                    const animData = animationDataRef.current;
                                    console.log('[Âä®Áîª] ÂºÄÂßãÊâßË°åÊï∞Â≠óË∑≥Âä®Âä®Áîª:', animData);
                                    
                                    // Êõ¥Êñ∞ÂÖ®ÁΩëÂèóËôê‰∫∫Êï∞ÔºåÂ∏¶Ë∑≥Âä®ÊïàÊûú
                                    if (animData.totalUsers.old !== animData.totalUsers.new) {
                                        animateNumberUpdate('totalTestUsers', animData.totalUsers.old, animData.totalUsers.new, formatNumberLocal);
                                    }
                                    
                                    // Êõ¥Êñ∞ÊäÄÊúØÊéíÂêçÔºåÂ∏¶Ë∑≥Âä®ÊïàÊûú
                                    if (animData.techRank.old !== animData.techRank.new) {
                                        animateNumberUpdate('techRank', animData.techRank.old, animData.techRank.new, formatNumberLocal);
                                    }
                                    
                                    // Êõ¥Êñ∞‰∫∫Ê†ºÂ∫ìËß£ÈîÅÔºåÂ∏¶Ë∑≥Âä®ÊïàÊûú
                                    if (animData.unlockedCount.old !== animData.unlockedCount.new) {
                                        const animatePercentage = (elementId, oldVal, newVal) => {
                                            const element = document.getElementById(elementId);
                                            if (!element) return;
                                            
                                            element.classList.add('animate-pulse');
                                            const diff = newVal - oldVal;
                                            const duration = 800;
                                            const steps = 30;
                                            const stepValue = diff / steps;
                                            let currentStep = 0;
                                            
                                            const animate = () => {
                                                if (currentStep < steps) {
                                                    const currentValue = oldVal + stepValue * currentStep;
                                                    element.textContent = currentValue.toFixed(1) + '%';
                                                    currentStep++;
                                                    requestAnimationFrame(() => {
                                                        setTimeout(animate, duration / steps);
                                                    });
                                                } else {
                                                    element.textContent = newVal.toFixed(1) + '%';
                                                    setTimeout(() => {
                                                        element.classList.remove('animate-pulse');
                                                    }, 100);
                                                }
                                            };
                                            
                                            animate();
                                        };
                                        
                                        animatePercentage('personalityUnlock', animData.unlockedCount.old, animData.unlockedCount.new);
                                    }
                                    
                                    // Ê∏ÖÁ©∫Âä®ÁîªÊï∞ÊçÆ
                                    animationDataRef.current = null;
                                }
                            } catch (error) {
                                console.error('Ê∏≤Êüì Dashboard Â§±Ë¥•:', error);
                            }
                            
                            // ÂÆûÊó∂Êõ¥Êñ∞ÁªüËÆ°Êï∞ÊçÆÔºà‰ªé Cloudflare API Ëé∑ÂèñÔºâ
                            const updateRealtimeStats = async () => {
                                // Ê†ºÂºèÂåñÊï∞Â≠óÂáΩÊï∞ÔºàÁ°Æ‰øùÂú®‰ΩúÁî®ÂüüÂÜÖÂèØÁî®Ôºâ
                                const formatNumberLocal = (num) => {
                                    if (num >= 1000000) return (num / 1000000).toFixed(1) + 'M';
                                    if (num >= 10000) return (num / 10000).toFixed(1) + '‰∏á';
                                    if (num >= 1000) return (num / 1000).toFixed(1) + 'K';
                                    return num.toString();
                                };
                                
                                try {
                                    const apiUrl = 'https://cursor-clinical-analysis.psterman.workers.dev/';
                                    console.log('[ÂÆûÊó∂Êõ¥Êñ∞] ÂºÄÂßãËé∑Âèñ Cloudflare ÂÆûÊó∂Êï∞ÊçÆ...');
                                    
                                    const response = await fetch(apiUrl, {
                                        method: 'GET',
                                        headers: {
                                            'Content-Type': 'application/json',
                                        },
                                        mode: 'cors',
                                        cache: 'no-cache',
                                    });
                                    
                                    if (response.ok) {
                                        const data = await response.json();
                                        const value = data.value || data.totalUsers || data.total || data.count || 0;
                                        
                                        console.log('[ÂÆûÊó∂Êõ¥Êñ∞] API ËøîÂõûÊï∞ÊçÆ:', data, 'Ëß£ÊûêÂêéÁöÑÂÄº:', value);
                                        
                                        if (value > 0) {
                                            // Êõ¥Êñ∞ React Áä∂ÊÄÅ
                                            setTotalUsers(value);
                                            setTotalTestUsers(value);
                                            const calculatedRank = Math.floor(value * 0.6);
                                            setTechRank(calculatedRank);
                                            const calculatedUnlocked = Math.min(100, parseFloat((value / 1000).toFixed(1)));
                                            setUnlockedCount(calculatedUnlocked);
                                            
                                            // Êõ¥Êñ∞ DOM ÂÖÉÁ¥†
                                            const totalUsersEl = document.getElementById('totalTestUsers');
                                            const techRankEl = document.getElementById('techRank');
                                            const personalityUnlockEl = document.getElementById('personalityUnlock');
                                            
                                            if (totalUsersEl) {
                                                // ‰ΩøÁî® formatNumber Â§ÑÁêÜÊòæÁ§∫Ê†ºÂºè
                                                const formatted = formatNumberLocal(value);
                                                totalUsersEl.textContent = formatted;
                                                // Ê∑ªÂä†Êõ¥Êñ∞Âä®Áîª
                                                totalUsersEl.classList.add('animate-pulse');
                                                setTimeout(() => {
                                                    totalUsersEl.classList.remove('animate-pulse');
                                                }, 600);
                                                console.log('[ÂÆûÊó∂Êõ¥Êñ∞] ÂÖ®ÁΩëÂèóËôê‰∫∫Êï∞Â∑≤Êõ¥Êñ∞:', formatted);
                                            } else {
                                                console.warn('[ÂÆûÊó∂Êõ¥Êñ∞] Êú™ÊâæÂà∞ totalTestUsers ÂÖÉÁ¥†');
                                            }
                                            
                                            if (techRankEl) {
                                                // ‰ΩøÁî® formatNumber Â§ÑÁêÜÊòæÁ§∫Ê†ºÂºè
                                                const formatted = formatNumberLocal(calculatedRank);
                                                techRankEl.textContent = formatted;
                                                techRankEl.classList.add('animate-pulse');
                                                setTimeout(() => {
                                                    techRankEl.classList.remove('animate-pulse');
                                                }, 600);
                                                console.log('[ÂÆûÊó∂Êõ¥Êñ∞] ÊäÄÊúØÊéíÂêçÂ∑≤Êõ¥Êñ∞:', formatted);
                                            } else {
                                                console.warn('[ÂÆûÊó∂Êõ¥Êñ∞] Êú™ÊâæÂà∞ techRank ÂÖÉÁ¥†');
                                            }
                                            
                                            if (personalityUnlockEl) {
                                                personalityUnlockEl.textContent = calculatedUnlocked.toFixed(1) + '%';
                                                personalityUnlockEl.classList.add('animate-pulse');
                                                setTimeout(() => {
                                                    personalityUnlockEl.classList.remove('animate-pulse');
                                                }, 600);
                                                console.log('[ÂÆûÊó∂Êõ¥Êñ∞] ‰∫∫Ê†ºÂ∫ìËß£ÈîÅÂ∑≤Êõ¥Êñ∞:', calculatedUnlocked.toFixed(1) + '%');
                                            } else {
                                                console.warn('[ÂÆûÊó∂Êõ¥Êñ∞] Êú™ÊâæÂà∞ personalityUnlock ÂÖÉÁ¥†');
                                            }
                                            
                                            console.log('[ÂÆûÊó∂Êõ¥Êñ∞] ÁªüËÆ°Êï∞ÊçÆÂ∑≤ÂÖ®ÈÉ®Êõ¥Êñ∞:', {
                                                totalUsers: value,
                                                techRank: calculatedRank,
                                                unlockedCount: calculatedUnlocked
                                            });
                                        } else {
                                            console.warn('[ÂÆûÊó∂Êõ¥Êñ∞] API ËøîÂõûÁöÑÂÄº‰∏∫ 0 ÊàñÊó†Êïà');
                                        }
                                    } else {
                                        console.warn('[ÂÆûÊó∂Êõ¥Êñ∞] API ËØ∑Ê±ÇÂ§±Ë¥•ÔºåÁä∂ÊÄÅÁ†Å:', response.status);
                                    }
                                } catch (error) {
                                    console.error('[ÂÆûÊó∂Êõ¥Êñ∞] Ëé∑ÂèñÊï∞ÊçÆÂ§±Ë¥•:', error.message, error);
                                }
                            };
                            
                            // Á≠âÂæÖ DOM ÂÆåÂÖ®Ê∏≤ÊüìÂêéÂÜçÊõ¥Êñ∞ÔºàÂª∂ËøüÊâßË°å‰ª•Á°Æ‰øùÂÖÉÁ¥†Â≠òÂú®Ôºâ
                            setTimeout(() => {
                                console.log('[ÂÆûÊó∂Êõ¥Êñ∞] ÂºÄÂßãÈ¶ñÊ¨°Êõ¥Êñ∞ÂÆûÊó∂ÁªüËÆ°Êï∞ÊçÆ...');
                                updateRealtimeStats();
                                
                                // Ê∏ÖÁêÜ‰πãÂâçÁöÑÂÆöÊó∂Âô®ÔºàÂ¶ÇÊûúÂ≠òÂú®Ôºâ
                                if (window.realtimeStatsInterval) {
                                    clearInterval(window.realtimeStatsInterval);
                                }
                                
                                // ÊØè30ÁßíËá™Âä®Âà∑Êñ∞‰∏ÄÊ¨°
                                window.realtimeStatsInterval = setInterval(() => {
                                    console.log('[ÂÆûÊó∂Êõ¥Êñ∞] ÂÆöÊó∂Âà∑Êñ∞ÁªüËÆ°Êï∞ÊçÆ...');
                                    updateRealtimeStats();
                                }, 30000);
                            }, 500);
                        }, 200);
                    } else {
                        console.error('ÂÆπÂô®ÊàñÊ®°ÂùóÊú™ÊâæÂà∞');
                    }
                }, 100);
            };

            // ÂØºÂá∫Êä•Âëä
            const exportReport = async () => {
                try {
                    const exportArea = document.getElementById('exportArea');
                    if (!exportArea) {
                        alert('ÂØºÂá∫Âå∫ÂüüÊú™ÊâæÂà∞');
                        return;
                    }
                    
                    const canvas = await html2canvas(exportArea, {
                        backgroundColor: '#ffffff',
                        scale: 2,
                        useCORS: true,
                        logging: false,
                    });

                    const link = document.createElement('a');
                    link.download = `cursor-audit-${new Date().getTime()}.png`;
                    link.href = canvas.toDataURL('image/png');
                    link.click();
                } catch (err) {
                    console.error('ÂØºÂá∫Â§±Ë¥•:', err);
                    alert('ÂØºÂá∫Â§±Ë¥•: ' + err.message);
                }
            };

            return (
                <div className="min-h-screen text-zinc-100 p-4 md:p-8 flex flex-col items-center justify-center relative">
                    <div className="fixed top-0 left-0 w-full h-1 bg-gradient-to-r from-purple-600 via-blue-500 to-cyan-400 shadow-[0_0_15px_rgba(139,92,246,0.5)] z-50" />

                    {/* ÈöêËóèÁöÑÊñá‰ª∂ËæìÂÖ• */}
                    <input 
                        type="file" 
                        ref={folderInputRef}
                        webkitdirectory=""
                        directory=""
                        multiple 
                        style={{ display: 'none' }}
                        onChange={(e) => {
                            console.log('Êñá‰ª∂Â§πÈÄâÊã©‰∫ã‰ª∂Ëß¶Âèë', e.target.files);
                            handleFileUpload(e, 'folder');
                        }}
                    />
                    <input 
                        type="file" 
                        ref={fileInputRef}
                        accept=".vscdb,.db,.sqlite,.sqlite3" 
                        multiple 
                        style={{ display: 'none' }}
                        onChange={(e) => {
                            console.log('Êñá‰ª∂ÈÄâÊã©‰∫ã‰ª∂Ëß¶Âèë', e.target.files);
                            handleFileUpload(e, 'file');
                        }}
                    />

                    {/* ‰∏ä‰º†Èò∂ÊÆµ */}
                    {step === 'upload' && (
                        <div className="max-w-2xl w-full space-y-8 text-center">
                            <div className="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-zinc-900 border border-zinc-800 text-xs text-blue-400 mb-4 mx-auto">
                                <Icon name="zap" size={12} />
                                <span>AI Ë°å‰∏∫Â≠¶‰∏¥Â∫äÂÆûÈ™åÂÆ§ v2.0</span>
                            </div>
                            <h1 style={{
                                fontSize: 'clamp(2rem, 5vw, 3.5rem)',
                                fontWeight: 800,
                                letterSpacing: '-0.05em',
                                background: 'linear-gradient(to bottom, #fff 30%, #a1a1a1 100%)',
                                WebkitBackgroundClip: 'text',
                                backgroundClip: 'text',
                                WebkitTextFillColor: 'transparent',
                                marginBottom: '15px'
                            }}>
                                Cursor Ëø∑ÊÉëË°å‰∏∫Êä•Âëä
                            </h1>
                            <p className="text-zinc-500 text-lg max-w-md mx-auto">
                                Âü∫‰∫éÊú¨Âú∞ SQLite Êï∞ÊçÆÂ∫ìÁöÑÊ∑±Â∫¶ÂèóËôêÂàÜÊûê
                            </p>
                            
                            {error && (
                                <div className="bg-red-900/20 border border-red-800 text-red-400 p-4 rounded-xl">
                                    {error}
                                </div>
                            )}
                            
                            <div className="group relative p-12 mt-12 border-2 border-dashed border-zinc-800 rounded-3xl hover:border-purple-500/50 transition-all cursor-pointer bg-zinc-900/50 backdrop-blur-sm">
                                <div className="relative z-10 space-y-4 text-center">
                                    <span style={{ fontSize: '48px', marginBottom: '20px', display: 'block' }} className="upload-icon">üß™</span>
                                    <h2 style={{ marginBottom: '10px', fontSize: '20px', fontWeight: 600, color: 'var(--text-main)' }}>ËΩΩÂÖ•‰Ω†ÁöÑ VSCDB Êñá‰ª∂</h2>
                                    <p style={{ color: 'var(--text-dim)', marginBottom: '25px' }}>‰∫§Âá∫‰Ω†ÁöÑËÅäÂ§©Â≠òË¥ßÔºåÊï∞ÊçÆ‰ªÖÂú®Êú¨Âú∞Ëß£ÊûêÔºåÁªù‰∏ç‰∏ä‰º†‰∫ëÁ´Ø</p>
                                    <div className="flex gap-4 justify-center mt-6">
                                        <button 
                                            onClick={() => handleFileSelect('folder')}
                                            className="px-6 py-3 bg-purple-600 hover:bg-purple-700 text-white rounded-xl font-semibold transition-colors"
                                        >
                                            ÈÄâÊã©Êñá‰ª∂Â§π
                                        </button>
                                        <button 
                                            onClick={() => handleFileSelect('file')}
                                            className="px-6 py-3 bg-zinc-800 hover:bg-zinc-700 text-white rounded-xl font-semibold transition-colors border border-zinc-700"
                                        >
                                            ÈÄâÊã©Êñá‰ª∂
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    )}

                    {/* ÂàÜÊûêÈò∂ÊÆµ */}
                    {step === 'analyzing' && (
                        <div className="w-full max-w-lg bg-zinc-950 border border-zinc-800 rounded-xl p-6 shadow-2xl overflow-hidden">
                            <div className="flex items-center gap-2 mb-4 border-b border-zinc-900 pb-3">
                                <Icon name="terminal" size={16} className="text-green-500" />
                                <span className="text-xs text-zinc-500 uppercase tracking-widest">System Analysis</span>
                            </div>
                            <div className="space-y-2 h-64 overflow-y-auto custom-scrollbar">
                                {logs.map((log, i) => (
                                    <div key={i} className="text-sm text-zinc-400 font-mono">
                                        {log}
                                    </div>
                                ))}
                                <div className="w-2 h-5 bg-green-500 animate-pulse inline-block" />
                            </div>
                        </div>
                    )}

                    {/* È¢ÑËßàÁªìÊûúÈò∂ÊÆµ */}
                    {step === 'preview' && analysisData && (
                        <div className="max-w-4xl w-full space-y-6">
                            <div className="bg-zinc-900 border border-zinc-800 rounded-[2rem] p-8 md:p-12 relative overflow-hidden shadow-2xl">
                                <div className="absolute top-0 right-0 w-64 h-64 bg-purple-600/10 blur-[100px] -z-10" />
                                
                                <div className="flex flex-col md:flex-row justify-between items-start gap-8">
                                    <div className="space-y-6">
                                        <div>
                                            <h2 className="text-zinc-500 text-sm uppercase tracking-widest mb-1">‰∫∫Ê†ºÈâ¥ÂÆöÁªìÊûú</h2>
                                            <div className="text-5xl font-black text-white italic">
                                                {analysisData.vibeResult?.personalityName || 'Êú™Áü•‰∫∫Ê†º'}
                                            </div>
                                        </div>
                                        <p className="text-zinc-400 text-lg max-w-sm">
                                            {analysisData.vibeResult?.roastText || 'ÂàÜÊûê‰∏≠...'}
                                        </p>
                                        {analysisData.vibeResult?.vibeIndex && (
                                            <div className="flex gap-2">
                                                <span className="px-3 py-1 bg-zinc-800 text-zinc-400 text-xs rounded-full border border-zinc-700">
                                                    Vibe Index: {analysisData.vibeResult.vibeIndex}
                                                </span>
                                            </div>
                                        )}
                                    </div>

                                    <div className="grid grid-cols-2 gap-4 w-full md:w-auto">
                                        <StatBox 
                                            label="ÂÖ®ÁΩëÂèóËôê‰∫∫Êï∞" 
                                            value={formatNumber(totalUsers)} 
                                            sub="‰∫∫" 
                                            color="text-blue-400" 
                                        />
                                        <StatBox 
                                            label="ËµõÂçöÁ£ïÂ§¥" 
                                            value={analysisData.stats?.qingCount || 0} 
                                            sub="Ê¨°" 
                                            color="text-purple-400" 
                                        />
                                        <StatBox 
                                            label="ÂÖ®ÁΩëÊéíÂêç" 
                                            value={calculateRank(analysisData.stats?.qingCount || 0)} 
                                            sub="%" 
                                            color="text-blue-400" 
                                        />
                                        <StatBox 
                                            label="Áî≤Êñπ‰∏äË∫´" 
                                            value={analysisData.stats?.buCount || 0} 
                                            sub="Ê¨°" 
                                            color="text-red-400" 
                                        />
                                        <StatBox 
                                            label="ÂØπËØùÂ§©Êï∞" 
                                            value={calculateUsageDays(analysisData.stats)} 
                                            sub="Â§©" 
                                            color="text-emerald-400" 
                                        />
                                    </div>
                                </div>

                                <div className="mt-12 p-6 bg-zinc-950/50 rounded-2xl border border-zinc-800 flex items-start gap-4">
                                    <Icon name="alert-triangle" className="text-yellow-500 shrink-0 mt-1" size={20} />
                                    <p className="text-sm text-zinc-400 italic">
                                        ‰∏ìÂÆ∂ËØäÊñ≠Ôºö‰Ω†ÂØπ Cursor ËØ¥‰∫Ü {analysisData.stats?.qingCount || 0} Ê¨°"ËØ∑"Ôºå
                                        {analysisData.stats?.qingCount > 100 ? '‰Ω†ÂØπ‰Ω†ËÄÅÊùøÂèØËÉΩÈÉΩÊ≤°Ëøô‰πàÂÆ¢Ê∞îËøá„ÄÇ' : 'ËøòÁÆóÊ≠£Â∏∏„ÄÇ'}
                                        Âª∫ËÆÆÈÄÇÂΩìÂ¢ûÂä†"Áõ¥Êé•ÂëΩ‰ª§"ËØ≠Ê∞îÔºåÊâæÂõû‰∏¢Â§±ÁöÑÁ†ÅÂÜúÂ∞ä‰∏•„ÄÇ
                                    </p>
                                </div>
                            </div>

                            <div className="flex flex-col sm:flex-row gap-4 justify-center pt-4">
                                <button 
                                    onClick={showFullReport}
                                    className="flex items-center justify-center gap-2 bg-white text-black px-8 py-4 rounded-2xl font-bold hover:bg-zinc-200 transition-colors"
                                >
                                    <Icon name="share-2" size={20} />
                                    ÊôíÂá∫ÊàëÁöÑÂèóËôêËØÅÊçÆ
                                </button>
                                <button 
                                    onClick={exportReport}
                                    className="flex items-center justify-center gap-2 bg-zinc-900 text-white px-8 py-4 rounded-2xl font-bold border border-zinc-800 hover:bg-zinc-800 transition-colors"
                                >
                                    <Icon name="download" size={20} />
                                    ‰øùÂ≠ò‰ΩìÊ£ÄÊä•Âëä
                                </button>
                            </div>
                        </div>
                    )}

                    {/* ÂÆåÊï¥Êä•ÂëäÈò∂ÊÆµ */}
                    {step === 'fullReport' && (
                        <div className="w-full" style={{minHeight: '100vh'}}>
                            <div id="fullReportContainer" style={{display: 'block'}}></div>
                        </div>
                    )}
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
